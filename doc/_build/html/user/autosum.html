

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2. Reference guide &mdash; vplants v0.9 documentation</title>
    <link rel="stylesheet" href="../_static/openalea.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/oaicon.ico"/>
    <link rel="top" title="vplants v0.9 documentation" href="../index.html" />
    <link rel="prev" title="1.7. Bibliography" href="biblio.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-4372857-3']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="biblio.html" title="1.7. Bibliography"
             accesskey="P">previous</a> |</li>


<li><a href="../../../../../../openalea/doc/_build/html/index.html"> Main home </a>  |&nbsp;</li>
<li><a href="../../../../../../openalea/doc/_build/html/vplants.html"> vplants packages </a> |&nbsp;</li><li><a href="../contents.html"> Documentation </a> &raquo;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Reference guide</a><ul>
<li><a class="reference internal" href="#biological-modules">2.1. Biological modules</a><ul>
<li><a class="reference internal" href="#module-openalea.stocatree.metamer">2.1.1. <tt class="docutils literal"><span class="pre">metamer</span></tt> &#8211; metamer</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.fruit">2.1.2. <tt class="docutils literal"><span class="pre">fruit</span></tt> &#8211; Fruit, AppleFruit</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.leaf">2.1.3. <tt class="docutils literal"><span class="pre">leaf</span></tt> &#8211; Leaf, AppleLeaf</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.apex">2.1.4. <tt class="docutils literal"><span class="pre">apex</span></tt> &#8211; Apex</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.internode">2.1.5. <tt class="docutils literal"><span class="pre">internode</span></tt> Internode</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.growth_unit">2.1.6. <tt class="docutils literal"><span class="pre">growth_unit</span></tt> Growth unit</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.wood">2.1.7. <tt class="docutils literal"><span class="pre">wood</span></tt> &#8211; Wood</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.tree">2.1.8. <tt class="docutils literal"><span class="pre">tree</span></tt> Tree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scientific-modules">2.2. Scientific modules</a><ul>
<li><a class="reference internal" href="#module-openalea.stocatree.sequences">2.2.1. <tt class="docutils literal"><span class="pre">sequences</span></tt> &#8211; Sequences tools</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.physics">2.2.2. <tt class="docutils literal"><span class="pre">physics</span></tt> &#8211; Physics</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.srandom">2.2.3. <tt class="docutils literal"><span class="pre">srandom</span></tt> &#8211; SRandom</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.pipe">2.2.4. <tt class="docutils literal"><span class="pre">pipe</span></tt> &#8211; Pipe</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.constants">2.2.5. <tt class="docutils literal"><span class="pre">constants</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#rendering-and-post-analysis">2.3. Rendering and post analysis</a><ul>
<li><a class="reference internal" href="#output-output">2.3.1. <tt class="docutils literal"><span class="pre">output</span></tt> Output</a></li>
<li><a class="reference internal" href="#colors-colors">2.3.2. <tt class="docutils literal"><span class="pre">colors</span></tt> Colors</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.post_analysis">2.3.3. <tt class="docutils literal"><span class="pre">post_analysis</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimisation-module">2.4. Optimisation module</a><ul>
<li><a class="reference internal" href="#optimisation">2.4.1. <tt class="docutils literal"><span class="pre">optimisation</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tools">2.5. tools</a><ul>
<li><a class="reference internal" href="#module-openalea.stocatree.tools.simulation">2.5.1. <tt class="docutils literal"><span class="pre">simulation</span></tt> Simulation</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.tools.surface">2.5.2. <tt class="docutils literal"><span class="pre">surface</span></tt> &#8211; surface</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.tools.read_function">2.5.3. <tt class="docutils literal"><span class="pre">read_function</span></tt> &#8211; ReadFunction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-openalea.stocatree.config_doc">2.6. <tt class="docutils literal"><span class="pre">config_doc</span></tt> config</a><ul>
<li><a class="reference internal" href="#general-section">2.6.1. general section</a></li>
<li><a class="reference internal" href="#stocatree-section">2.6.2. stocatree section</a></li>
<li><a class="reference internal" href="#output-section">2.6.3. output section</a></li>
<li><a class="reference internal" href="#tree-section">2.6.4. tree section</a></li>
<li><a class="reference internal" href="#wood-section">2.6.5. wood section</a></li>
<li><a class="reference internal" href="#internode-section">2.6.6. internode section</a></li>
<li><a class="reference internal" href="#apex-section">2.6.7. apex section</a></li>
<li><a class="reference internal" href="#markov-section">2.6.8. markov section</a></li>
<li><a class="reference internal" href="#fruit-section">2.6.9. fruit section</a></li>
<li><a class="reference internal" href="#leaf-section">2.6.10. leaf section</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="biblio.html"
                        title="previous chapter">1.7. Bibliography</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/user/autosum.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="reference-guide">
<h1><a class="toc-backref" href="#id14">2. Reference guide</a><a class="headerlink" href="#reference-guide" title="Permalink to this headline">Â¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#reference-guide" id="id14">Reference guide</a><ul>
<li><a class="reference internal" href="#biological-modules" id="id15">Biological modules</a><ul>
<li><a class="reference internal" href="#module-openalea.stocatree.metamer" id="id16"><tt class="xref py py-mod docutils literal"><span class="pre">metamer</span></tt> &#8211; metamer</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.fruit" id="id17"><tt class="xref py py-mod docutils literal"><span class="pre">fruit</span></tt> &#8211; Fruit, AppleFruit</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.leaf" id="id18"><tt class="xref py py-mod docutils literal"><span class="pre">leaf</span></tt> &#8211; Leaf, AppleLeaf</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.apex" id="id19"><tt class="xref py py-mod docutils literal"><span class="pre">apex</span></tt> &#8211; Apex</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.internode" id="id20"><tt class="xref py py-mod docutils literal"><span class="pre">internode</span></tt> Internode</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.growth_unit" id="id21"><tt class="xref py py-mod docutils literal"><span class="pre">growth_unit</span></tt> Growth unit</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.wood" id="id22"><tt class="xref py py-mod docutils literal"><span class="pre">wood</span></tt> &#8211; Wood</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.tree" id="id23"><tt class="xref py py-mod docutils literal"><span class="pre">tree</span></tt> Tree</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scientific-modules" id="id24">Scientific modules</a><ul>
<li><a class="reference internal" href="#module-openalea.stocatree.sequences" id="id25"><a class="reference internal" href="#module-openalea.stocatree.sequences" title="openalea.stocatree.sequences: This module provides sequence analysis tools"><tt class="xref py py-mod docutils literal"><span class="pre">sequences</span></tt></a> &#8211; Sequences tools</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.physics" id="id26"><tt class="xref py py-mod docutils literal"><span class="pre">physics</span></tt> &#8211; Physics</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.srandom" id="id27"><tt class="xref py py-mod docutils literal"><span class="pre">srandom</span></tt> &#8211; SRandom</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.pipe" id="id28"><tt class="xref py py-mod docutils literal"><span class="pre">pipe</span></tt> &#8211; Pipe</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.constants" id="id29"><tt class="xref py py-mod docutils literal"><span class="pre">constants</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#rendering-and-post-analysis" id="id30">Rendering and post analysis</a><ul>
<li><a class="reference internal" href="#output-output" id="id31"><a class="reference external" href="http://openalea.gforge.inria.fr/doc/vplants/stat_tool/doc/_build/html/user/autosum.html#output" title="(in vplants.stat_tool v0.9.0)"><tt class="xref py py-mod docutils literal"><span class="pre">output</span></tt></a> Output</a></li>
<li><a class="reference internal" href="#colors-colors" id="id32"><tt class="xref py py-mod docutils literal"><span class="pre">colors</span></tt> Colors</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.post_analysis" id="id33"><tt class="xref py py-mod docutils literal"><span class="pre">post_analysis</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimisation-module" id="id34">Optimisation module</a><ul>
<li><a class="reference internal" href="#optimisation" id="id35"><tt class="xref py py-mod docutils literal"><span class="pre">optimisation</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tools" id="id36">tools</a><ul>
<li><a class="reference internal" href="#module-openalea.stocatree.tools.simulation" id="id37"><tt class="xref py py-mod docutils literal"><span class="pre">simulation</span></tt> Simulation</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.tools.surface" id="id38"><a class="reference internal" href="#module-surface" title="surface"><tt class="xref py py-mod docutils literal"><span class="pre">surface</span></tt></a> &#8211; surface</a></li>
<li><a class="reference internal" href="#module-openalea.stocatree.tools.read_function" id="id39"><tt class="xref py py-mod docutils literal"><span class="pre">read_function</span></tt> &#8211; ReadFunction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-openalea.stocatree.config_doc" id="id40"><tt class="xref py py-mod docutils literal"><span class="pre">config_doc</span></tt> config</a><ul>
<li><a class="reference internal" href="#general-section" id="id41">general section</a></li>
<li><a class="reference internal" href="#stocatree-section" id="id42">stocatree section</a></li>
<li><a class="reference internal" href="#output-section" id="id43">output section</a></li>
<li><a class="reference internal" href="#tree-section" id="id44">tree section</a></li>
<li><a class="reference internal" href="#wood-section" id="id45">wood section</a></li>
<li><a class="reference internal" href="#internode-section" id="id46">internode section</a></li>
<li><a class="reference internal" href="#apex-section" id="id47">apex section</a></li>
<li><a class="reference internal" href="#markov-section" id="id48">markov section</a></li>
<li><a class="reference internal" href="#fruit-section" id="id49">fruit section</a></li>
<li><a class="reference internal" href="#leaf-section" id="id50">leaf section</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="biological-modules">
<h2><a class="toc-backref" href="#id15">2.1. Biological modules</a><a class="headerlink" href="#biological-modules" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="module-openalea.stocatree.metamer">
<span id="metamer-metamer"></span><h3><a class="toc-backref" href="#id16">2.1.1. <tt class="xref py py-mod docutils literal"><span class="pre">metamer</span></tt> &#8211; metamer</a><a class="headerlink" href="#module-openalea.stocatree.metamer" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">summary</p>
<p>This module contains structures, classes, functions that were defined 
within the lsystem in MAppleT but that could be written outside in stocatree
to have more modularities. Yet, the functionalities and usage are almost
identical.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">to be completed</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">References:</th><td class="field-body"><ol class="first arabic simple">
<li>Colin Smith, Costes Evelyne, On the Simulation of Apple Trees Using 
Statistical and Biomechanical Principles, INRIA technical report, 2007</li>
</ol>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: metamer.py 9902 2010-11-09 16:25:29Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.metamer</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.metamer.metamer_data">
<em class="property">class </em><tt class="descname">metamer_data</tt><big>(</big><em>floral=False</em>, <em>number=0</em>, <em>hlu=None</em>, <em>zone=None</em>, <em>observation=None</em>, <em>p_angle=0.0</em>, <em>b_angle=0.0</em>, <em>wood=None</em>, <em>internode=None</em>, <em>fruit=None</em>, <em>leaf=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.metamer_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Class to define metamer data structure</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">Some definition:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>The torque, also called moment or moment of force is the 
tendency of a force to rotate an object about an axis. 
The symbol for torque is <span class="math">\tau</span>. The magnitude of torque depends
on the force applied, the length of the lever arm connecting the axis 
to the point of force application, and the angle between the two.</p>
<div class="math">
<p><span class="math">\boldsymbol \tau = \mathbf{r}\times \mathbf{F}\,\!= rF\sin \theta\,\!</span></p>
</div><p><strong>Constructor</strong></p>
<p>Leaf, internode, fruit and leaf must be provided</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>floral</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; </li>
<li><strong>number</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; </li>
<li><strong>hlu</strong> (<em>Frame</em>) &#8211; </li>
<li><strong>zone</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; </li>
<li><strong>observation</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; </li>
<li><strong>p_angle</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; phyllotactic angle in degrees</li>
<li><strong>b_angle</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; branching angle in degrees</li>
<li><strong>wood</strong> &#8211; a <a class="reference internal" href="#openalea.stocatree.wood.Wood" title="openalea.stocatree.wood.Wood"><tt class="xref py py-class docutils literal"><span class="pre">Wood</span></tt></a> instance</li>
<li><strong>internode</strong> &#8211; a <a class="reference internal" href="#openalea.stocatree.internode.Internode" title="openalea.stocatree.internode.Internode"><tt class="xref py py-class docutils literal"><span class="pre">Internode</span></tt></a> instance</li>
<li><strong>fruit</strong> &#8211; a <a class="reference internal" href="#openalea.stocatree.fruit.Fruit" title="openalea.stocatree.fruit.Fruit"><tt class="xref py py-class docutils literal"><span class="pre">Fruit</span></tt></a> instance</li>
<li><strong>leaf</strong> &#8211; a <a class="reference internal" href="#openalea.stocatree.leaf.Leaf" title="openalea.stocatree.leaf.Leaf"><tt class="xref py py-class docutils literal"><span class="pre">Leaf</span></tt></a> instance</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="openalea.stocatree.metamer.metamer_data.calculate_rotation_velocity">
<tt class="descname">calculate_rotation_velocity</tt><big>(</big><em>simulation</em>, <em>stake=True</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.metamer_data.calculate_rotation_velocity" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate the rotation velocity</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>stake</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; (default is True)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Calculate the rotation velocity of a torque</p>
<div class="math">
<p><span class="math">\Omega_\tau = \frac{\tau}{R}</span></p>
</div><p>where R is the rigidity and <span class="math">\tau</span> the cumulated total torque.</p>
<p>The memory rotation depends on the lost masses</p>
<div class="math">
<p><span class="math">\Omega_m =  \frac{\Delta m }{m} ?</span></p>
</div><div class="math">
<p><span class="math">\Omega' = \Omega_\tau + \Omega_m</span></p>
</div><div class="math">
<p><span class="math">\Omega = \Omega' * \alpha + (1-\alpha)*\Omega</span></p>
</div></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.metamer.metamer_data.compute_mass">
<tt class="descname">compute_mass</tt><big>(</big><em>mr=None</em>, <em>mb=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.metamer_data.compute_mass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the cumulated mass</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>mr</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; </li>
<li><strong>mb</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="math">
<p><span class="math">M = \pi r^2 h  \rho_{\rm{wood}} + m_{\rm{leaf}} + m_{\rm{fruit}}</span></p>
</div></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.metamer.metamer_data.organ_activity">
<tt class="descname">organ_activity</tt><big>(</big><em>simulation</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.metamer_data.organ_activity" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Update status of fruit and leaf components</p>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.metamer.metamer_data.pre_harvest_rotation">
<tt class="descname">pre_harvest_rotation</tt><a class="headerlink" href="#openalea.stocatree.metamer.metamer_data.pre_harvest_rotation" title="Permalink to this definition">Â¶</a></dt>
<dd><p>// The conditional on &#8216;number&#8217; is to get around a bug in LPFG.
// LPFG creates lots of temporary instances of objects that are
// never used.  We only want the constructor to have an effect
// when the object is one that is actually used in the structure
// and not a temporary object.</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.metamer.metamer_data.update_metamer_parameters">
<tt class="descname">update_metamer_parameters</tt><big>(</big><em>simulation</em>, <em>cambial=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.metamer_data.update_metamer_parameters" title="Permalink to this definition">Â¶</a></dt>
<dd><p>update metamer parameters</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>simulation</strong> (<em>Simulation</em>) &#8211; Simulation instance</li>
<li><strong>cambial</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>fields required from simualtion:dt, cal.year(), cal.current_data().new_cambial_layer</dt>
<dd>pre_harvest,bud_break</dd>
<dt>Update :</dt>
<dd><ul class="first last simple">
<li>age.</li>
<li>cambial layer if required</li>
<li>moment of area</li>
<li>rigidity</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.metamer.metamer_data.update_position">
<tt class="descname">update_position</tt><big>(</big><em>left_metamer_position=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.metamer_data.update_position" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Update position according to the left metamer position</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>left_metamer_position</strong> &#8211; (default None)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>If there is no left metamer, the position is simply:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">position</span> <span class="o">=</span> <span class="n">HLU</span><span class="o">.</span><span class="n">heading</span> <span class="o">*</span> <span class="n">length</span>
</pre></div>
</div>
<p>otherwise:</p>
<div class="highlight-python"><pre>position = left metamer position + HLU.heading * length</pre>
</div>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.metamer.reaction_wood_target">
<tt class="descname">reaction_wood_target</tt><big>(</big><em>up</em>, <em>heading</em>, <em>previous_heading</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.reaction_wood_target" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Reaction wood target</p>
<p>The reaction wood is proportional to the change in inclination
over a season (Almeras, 2001). Hypothesis: The reaction wood is
also proportional to the inclination from gravity.</p>
<div class="math">
<p><span class="math">P_r = 0.1635 - 0.1778 \theta_s</span></p>
</div><p>where <span class="math">P_r</span> is the radial portion of the outermost cambial layer that
become reaction wood and <span class="math">\theta_s</span> is the change in inclination of the 
internode over the season (i.e., the cahnge in <span class="math">\vec{H}</span>, the heading
vector of the HLU frame since the start of the spring.</p>
<p>In order to also take into account the gravity, The firs term in the equation above
must be multiply by a coefficient that varies with the angle between the internode and 
<span class="math">\vec{u}</span> a unit vector opposite to  <span class="math">-\vec{g}</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>up</strong> (<em>Vector3</em>) &#8211; </li>
<li><strong>heading</strong> &#8211; vector3</li>
<li><strong>previous_heading</strong> &#8211; vector3</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">reaction_wood (double)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.metamer.clamp_v3d_components_if_near_zero">
<tt class="descname">clamp_v3d_components_if_near_zero</tt><big>(</big><em>v</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.clamp_v3d_components_if_near_zero" title="Permalink to this definition">Â¶</a></dt>
<dd><p>clamp values near zero in a Vector3</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>v</strong> (<em>Vector3</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Used when saving results into MTG only.</p>
</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.metamer.cambial_layer">
<em class="property">class </em><tt class="descname">cambial_layer</tt><big>(</big><em>thickness=0</em>, <em>radius=0</em><big>)</big><a class="headerlink" href="#openalea.stocatree.metamer.cambial_layer" title="Permalink to this definition">Â¶</a></dt>
<dd><p>A simple layer class to manage cambial layers</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>thickness</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; the thickness of the layer (default 0)</li>
<li><strong>radius</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; position of the layer in the cross section (default 0)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>contains also a reaction wood attribute that will be used to store information</p>
<p>This class is used by <a class="reference internal" href="#openalea.stocatree.metamer.metamer_data" title="openalea.stocatree.metamer.metamer_data"><tt class="xref py py-class docutils literal"><span class="pre">metamer_data</span></tt></a> class.</p>
</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.fruit">
<span id="fruit-fruit-applefruit"></span><h3><a class="toc-backref" href="#id17">2.1.2. <tt class="xref py py-mod docutils literal"><span class="pre">fruit</span></tt> &#8211; Fruit, AppleFruit</a><a class="headerlink" href="#module-openalea.stocatree.fruit" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">fruit.py summary</p>
<p>A module dedicated to fruits</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">References:</th><td class="field-body"><ol class="first arabic simple">
<li>Colin Smith, Costes Evelyne, On the Simulation of Apple Trees Using 
Statistical and Biomechanical Principles, INRIA technical report, 2007</li>
</ol>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: fruit.py 9859 2010-11-04 14:51:55Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.fruit</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.fruit.AppleFruit">
<em class="property">class </em><tt class="descname">AppleFruit</tt><big>(</big><em>flower_duration=10.0</em>, <em>max_relative_growth_rate=0.16700000000000001</em>, <em>lost_time=28</em>, <em>max_age=147</em>, <em>probability=0.29999999999999999</em>, <em>max_absolute_growth_rate=0.0018</em><big>)</big><a class="headerlink" href="#openalea.stocatree.fruit.AppleFruit" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#openalea.stocatree.fruit.Fruit" title="openalea.stocatree.fruit.Fruit"><tt class="xref py py-class docutils literal"><span class="pre">openalea.stocatree.fruit.Fruit</span></tt></a></p>
<p>A specialised fruit class for apple trees</p>
<p>This class inherits methods and attributes from
<a class="reference internal" href="#openalea.stocatree.fruit.Fruit" title="openalea.stocatree.fruit.Fruit"><tt class="xref py py-class docutils literal"><span class="pre">Fruit</span></tt></a> and specialises
the <a class="reference internal" href="#openalea.stocatree.fruit.AppleFruit.compute_mass" title="openalea.stocatree.fruit.AppleFruit.compute_mass"><tt class="xref py py-meth docutils literal"><span class="pre">compute_mass()</span></tt></a> method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span> <span class="o">=</span> <span class="n">AppleFruit</span><span class="p">(</span><span class="n">max_age</span><span class="o">=</span><span class="mf">100.</span><span class="p">,</span> <span class="n">flower_duration</span><span class="o">=</span><span class="mf">12.</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">state</span>
<span class="go">&#39;flower&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">age</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">mass</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">_flower_duration</span>
<span class="go">12.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mass</span> <span class="o">=</span> <span class="n">fruit</span><span class="o">.</span><span class="n">compute_mass</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Construtor</strong></p>
<p>Inherits <tt class="xref py py-meth docutils literal"><span class="pre">get_state()</span></tt>, <tt class="xref py py-meth docutils literal"><span class="pre">set_state()</span></tt> from <a class="reference internal" href="#openalea.stocatree.fruit.Fruit" title="openalea.stocatree.fruit.Fruit"><tt class="xref py py-class docutils literal"><span class="pre">Fruit</span></tt></a> class. 
The method <a class="reference internal" href="#openalea.stocatree.fruit.AppleFruit.compute_mass" title="openalea.stocatree.fruit.AppleFruit.compute_mass"><tt class="xref py py-meth docutils literal"><span class="pre">compute_mass()</span></tt></a> is redefined.</p>
<p>The following arguments may be provided and are specific to apple trees. There 
are mainly used to compute the mass of the fruit as a function of its age except for
the <tt class="xref py py-attr docutils literal"><span class="pre">probbility</span></tt> attribute that is the probability of fruitification.</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="20%" />
<col width="18%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">name</th>
<th class="head">notation</th>
<th class="head">Default value</th>
<th class="head">units</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>flower_duration</td>
<td><span class="math">T_{fl}</span></td>
<td>10.0</td>
<td>day</td>
</tr>
<tr><td>max_relative_growth_rate</td>
<td><span class="math">R_m</span></td>
<td>0.167</td>
<td>per day</td>
</tr>
<tr><td>lost_time</td>
<td><span class="math">t_b</span></td>
<td>28.0</td>
<td>day</td>
</tr>
<tr><td>max_age</td>
<td>&nbsp;</td>
<td>147.0</td>
<td>day</td>
</tr>
<tr><td>probability</td>
<td>&nbsp;</td>
<td>0.3</td>
<td>&nbsp;</td>
</tr>
<tr><td>max_absolute_growth_rate</td>
<td><span class="math">C_m</span></td>
<td>0.0018</td>
<td>kgrams per day</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="openalea.stocatree.fruit.AppleFruit.compute_mass">
<tt class="descname">compute_mass</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.fruit.AppleFruit.compute_mass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Computes the fruit mass according to Lakso et al</p>
<p>The fruit mass <span class="math">M_f</span> is computed with an expolinear model of fruit
growth (Lakso et al., 1995) that is defined as follows:</p>
<div class="math">
<p><span class="math">M_f(t) = \frac{C_m}{R_m} \log (1.+ exp(R_m (t-t_b)))</span></p>
</div><p>where <span class="math">M_f</span> is the mass of the fruit <span class="math">t</span> days after emergence, <span class="math">C_m</span> is the
maximum absolute growth rate, <span class="math">R_m</span> is the maximum relative growth rate, and <span class="math">t_b</span>
where the linear portion of the growth  would intercept the time-axis. This equation gives
a curve that initialiy  has an exponential character but quickly becomes a linear curve.</p>
<p>The parameters of the model are chosen to match the observations by Benzig [1], as
analysed by Costes [2]. The particular observations used are representative of Fuji
cultivars under a light fruit load, typical of young Fuji trees.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">the flower duration is taken into account in the mode and substracted
to the fruit age before any mass computation. The fruit mass is therefore
independant of flower duration.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">fruit mass in gramms</p>
</td>
</tr>
<tr class="field"><th class="field-name">References :</th><td class="field-body"><ol class="first last arabic simple">
<li>Benzing S (1999) Patterns of vegetative and reproductive growth in apple
(Malusdomestica Borkh.). Master thesis, Faculty de Wiesbaden,
Geisenheim.</li>
<li>Costes E, Lauri PE, R&#8217;egnard JL (2006) Tree architecture and production.
Horticultural Reviews 32, 1-60.</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>[<a href="#id1"><span class="problematic" id="id2">`source code &lt;..\plot_directive\pyplots/fruit.py&gt;`__</span></a>, <a href="#id1"><span class="problematic" id="id3">`hires.png &lt;..\plot_directive\pyplots/fruit.hires.png&gt;`__</span></a>, <a href="#id1"><span class="problematic" id="id4">`pdf &lt;..\plot_directive\pyplots/fruit.pdf&gt;`__</span></a>]</p>
<div class="figure">
<img alt="../_images/fruit.png" src="../_images/fruit.png" />
</div>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.fruit.AppleFruit.state">
<tt class="descname">state</tt><a class="headerlink" href="#openalea.stocatree.fruit.AppleFruit.state" title="Permalink to this definition">Â¶</a></dt>
<dd><p>getter/setter of <a class="reference internal" href="#openalea.stocatree.fruit.AppleFruit.state" title="openalea.stocatree.fruit.AppleFruit.state"><tt class="xref py py-attr docutils literal"><span class="pre">state</span></tt></a> of the component to be specified by the user</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.fruit.Fruit">
<em class="property">class </em><tt class="descname">Fruit</tt><big>(</big><em>state='flower'</em><big>)</big><a class="headerlink" href="#openalea.stocatree.fruit.Fruit" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>a base class interface for fruits</p>
<p>A fruit is defined by an <strong>age</strong>, a <strong>mass</strong> and a <strong>state</strong> that may be
in [&#8216;flower&#8217;, &#8216;no_flower&#8217;, &#8216;fruit_scar&#8217;, &#8216;fruit&#8217;].</p>
<p>There is a setter/getter for the state.</p>
<p>There is a compulsary method named <a class="reference internal" href="#openalea.stocatree.fruit.Fruit.compute_mass" title="openalea.stocatree.fruit.Fruit.compute_mass"><tt class="xref py py-meth docutils literal"><span class="pre">compute_mass()</span></tt></a>. Derived classes must
implement this method.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span> <span class="o">=</span> <span class="n">Fruit</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">state</span>
<span class="go">&#39;flower&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">age</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fruit</span><span class="o">.</span><span class="n">mass</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p><strong>Constructor</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>state</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) &#8211; a valid fruit state (default is flower)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The <tt class="xref py py-attr docutils literal"><span class="pre">age</span></tt> and <tt class="xref py py-attr docutils literal"><span class="pre">mass</span></tt> attributes are set to zero when new 
instance is created.</p>
<div class="admonition-todo admonition " id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">make age and  mass real attributes</p>
</div>
<dl class="method">
<dt id="openalea.stocatree.fruit.Fruit.compute_mass">
<tt class="descname">compute_mass</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.fruit.Fruit.compute_mass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>a method that computes the mass of the fruit and returns its value</p>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.fruit.Fruit.state">
<tt class="descname">state</tt><a class="headerlink" href="#openalea.stocatree.fruit.Fruit.state" title="Permalink to this definition">Â¶</a></dt>
<dd><p>getter/setter of <a class="reference internal" href="#openalea.stocatree.fruit.Fruit.state" title="openalea.stocatree.fruit.Fruit.state"><tt class="xref py py-attr docutils literal"><span class="pre">state</span></tt></a> of the component to be specified by the user</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.leaf">
<span id="leaf-leaf-appleleaf"></span><h3><a class="toc-backref" href="#id18">2.1.3. <tt class="xref py py-mod docutils literal"><span class="pre">leaf</span></tt> &#8211; Leaf, AppleLeaf</a><a class="headerlink" href="#module-openalea.stocatree.leaf" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">Summary</p>
<p>A module dedicated to the leaves</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: leaf.py 9859 2010-11-04 14:51:55Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.leaf</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field"><th class="field-name">References:</th><td class="field-body"><ol class="first last arabic simple">
<li>Colin Smith, Costes Evelyne, On the Simulation of Apple Trees
Using Statistical and Biomechanical Principles, INRIA
technical report, 2007</li>
</ol>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.leaf.AppleLeaf">
<em class="property">class </em><tt class="descname">AppleLeaf</tt><big>(</big><em>state='growing'</em>, <em>fall_probability=0.10000000000000001</em>, <em>maturation=12</em>, <em>mass_per_area=0.22</em>, <em>max_area=0.0030000000000000001</em>, <em>min_final_area=0.002</em>, <em>petiole_radius=0.00059999999999999995</em>, <em>preformed_leaves=8</em><big>)</big><a class="headerlink" href="#openalea.stocatree.leaf.AppleLeaf" title="Permalink to this definition">Â¶</a></dt>
<dd><p>A specialised leaf class for apple trees</p>
<p>This class inherits methods and attributes from
<a class="reference internal" href="#openalea.stocatree.leaf.Leaf" title="openalea.stocatree.leaf.Leaf"><tt class="xref py py-class docutils literal"><span class="pre">Leaf</span></tt></a> and specialises
the <a class="reference internal" href="#openalea.stocatree.leaf.AppleLeaf.compute_area" title="openalea.stocatree.leaf.AppleLeaf.compute_area"><tt class="xref py py-meth docutils literal"><span class="pre">compute_area()</span></tt></a> method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Usage :</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">AppleLeaf</span><span class="p">(</span><span class="n">maturation</span><span class="o">=</span><span class="mf">12.</span><span class="p">,</span> <span class="n">petiole_radius</span><span class="o">=</span><span class="mf">0.0006</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">area</span> <span class="o">=</span> <span class="n">leaf</span><span class="o">.</span><span class="n">compute_area</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mass</span> <span class="o">=</span> <span class="n">leaf</span><span class="o">.</span><span class="n">compute_mass</span><span class="p">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p><strong>Constructor</strong></p>
<p>The following atttributes are specific to apple tree and used as argument to the constructor.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">be careful with units. Should be in S.I.</p>
</div>
<p>The following parametesr are used by the constructor and may be provided 
within the configuration within the L-system (see stocatree.lpy).</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="30%" />
<col width="29%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">type</th>
<th class="head">notation</th>
<th class="head">value</th>
<th class="head">units</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>max_area</td>
<td><span class="math">A_{\textrm{max}}</span></td>
<td><span class="math">30.10^{-4}</span></td>
<td><span class="math">m^2</span></td>
</tr>
<tr><td>min_final_area</td>
<td><span class="math">A_{\textrm{min}}</span></td>
<td><span class="math">20.10^{-4}</span></td>
<td><span class="math">m^2</span></td>
</tr>
<tr><td>mass_per_area</td>
<td>&nbsp;</td>
<td><span class="math">0.220</span></td>
<td><span class="math">g.m^{-2}</span></td>
</tr>
<tr><td>petiole_radius</td>
<td>&nbsp;</td>
<td><span class="math">0.6\times10^{-3}</span></td>
<td><span class="math">m</span></td>
</tr>
<tr><td>fall_probability</td>
<td>&nbsp;</td>
<td>0.1</td>
<td>&nbsp;</td>
</tr>
<tr><td>maturation</td>
<td><span class="math">T^{l}_m</span></td>
<td>12</td>
<td>days</td>
</tr>
<tr><td>preformed_leaves</td>
<td><span class="math">N_p</span></td>
<td>8</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>state</strong> &#8211; see <a class="reference internal" href="#openalea.stocatree.leaf.Leaf" title="openalea.stocatree.leaf.Leaf"><tt class="xref py py-class docutils literal"><span class="pre">Leaf</span></tt></a> for possible values (default is growing)</li>
<li><strong>fall_probability</strong> &#8211; </li>
<li><strong>maturation</strong> &#8211; </li>
<li><strong>mass_per_area</strong> &#8211; </li>
<li><strong>max_area</strong> &#8211; </li>
<li><strong>min_final_area</strong> &#8211; </li>
<li><strong>petiole_radius</strong> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="openalea.stocatree.leaf.AppleLeaf.compute_area">
<tt class="descname">compute_area</tt><big>(</big><em>number</em><big>)</big><a class="headerlink" href="#openalea.stocatree.leaf.AppleLeaf.compute_area" title="Permalink to this definition">Â¶</a></dt>
<dd><p>computes the leaf area</p>
<p>The growth dynamic of the leaves, as a normalised surface area relative
to the area at maturity, has been fitted to an S-curve over twelve days,
based on observation by Kelner [1]. The maximum surface of a neoformed
leaf <span class="math">A_{\textrm{max}}=30 \textrm{cm}^2</span> [2], and the density is, as
a mass per surface area unit is <span class="math">220 g/m^2</span> [3].</p>
<p>The S-curve is hard-coded as a numpy array.</p>
<p>It is assumed that the first <span class="math">N_p=8</span> metamers support preformed leaves,
with a reduced maximum area according to their order in the growth unit
following the equation</p>
<div class="math">
<p><span class="math">\frac{N_l}{N_p}(A_{\textrm{max}}-A_{\textrm{min}}) + A_{\textrm{min}}</span></p>
</div><p>func_leaf_area = ReadFunction(&#8216;functions.fset&#8217;, &#8216;leaf_area&#8217;)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>number</strong> &#8211; the leaf number (not used if greater than 8, the neoformed leaves)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">age must be in days since maturity is in days.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">References :</th><td class="field-body"><ol class="first last arabic simple">
<li>J.J Kelner. Personnal communications on unpublished measurements of leaves (2006)</li>
<li>Massonnet C (2004) VariabilitÃ© architecturale et fonctionnelle du systÃ¨me
aÃ©rien chez le pommier (MalusDomestica Borkh.): comparaison de
quatre cultivars par une approche de modÃ©lisation structure-fonction. PhD
Thesis, SupAgro Montpellier University, Montpellier.</li>
<li>J.L. Regnard, pers. comm.</li>
</ol>
</td>
</tr>
</tbody>
</table>
<p>The sigmoid function that is used to compute the relative area is as follows</p>
<p>[<a href="#id1"><span class="problematic" id="id5">`source code &lt;..\plot_directive\pyplots/leaf.py&gt;`__</span></a>, <a href="#id1"><span class="problematic" id="id6">`hires.png &lt;..\plot_directive\pyplots/leaf.hires.png&gt;`__</span></a>, <a href="#id1"><span class="problematic" id="id7">`pdf &lt;..\plot_directive\pyplots/leaf.pdf&gt;`__</span></a>]</p>
<div class="figure">
<img alt="../_images/leaf.png" src="../_images/leaf.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.leaf.AppleLeaf.compute_area_from_func">
<tt class="descname">compute_area_from_func</tt><big>(</big><em>number</em>, <em>func_leaf_area</em><big>)</big><a class="headerlink" href="#openalea.stocatree.leaf.AppleLeaf.compute_area_from_func" title="Permalink to this definition">Â¶</a></dt>
<dd><p>reads a fset file (Lstudio to get growth sigmoid function</p>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 8981: </span>use compute_area instead that is a bit slower but simpler and more precise</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">func_leaf_area</span> <span class="o">=</span> <span class="n">ReadFunction</span><span class="p">(</span><span class="s">&#39;functions.fset&#39;</span><span class="p">,</span> <span class="s">&#39;leaf_area&#39;</span><span class="p">)</span>
<span class="n">leaf</span><span class="o">.</span><span class="n">compute_area_from_func</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="n">func_leaf_area</span><span class="p">)</span>
</pre></div>
</div>
<p>This function should give results equivalent to <a class="reference internal" href="#openalea.stocatree.leaf.AppleLeaf.compute_area" title="openalea.stocatree.leaf.AppleLeaf.compute_area"><tt class="xref py py-meth docutils literal"><span class="pre">compute_area()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.leaf.AppleLeaf.compute_mass">
<tt class="descname">compute_mass</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.leaf.AppleLeaf.compute_mass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the mass of the leaf and returns its value (in kgrams)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">area times mass_per_area</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">compute_area must be called before.</p>
</div>
<p>[<a href="#id1"><span class="problematic" id="id8">`source code &lt;..\plot_directive\pyplots/leaf_mass.py&gt;`__</span></a>, <a href="#id1"><span class="problematic" id="id9">`hires.png &lt;..\plot_directive\pyplots/leaf_mass.hires.png&gt;`__</span></a>, <a href="#id1"><span class="problematic" id="id10">`pdf &lt;..\plot_directive\pyplots/leaf_mass.pdf&gt;`__</span></a>]</p>
<div class="figure">
<img alt="../_images/leaf_mass.png" src="../_images/leaf_mass.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.leaf.AppleLeaf.initialisation">
<tt class="descname">initialisation</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.leaf.AppleLeaf.initialisation" title="Permalink to this definition">Â¶</a></dt>
<dd><p>check that mass_per_area, maturation and max_area have been set
to numerical values</p>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.leaf.AppleLeaf.state">
<tt class="descname">state</tt><a class="headerlink" href="#openalea.stocatree.leaf.AppleLeaf.state" title="Permalink to this definition">Â¶</a></dt>
<dd><p>setter/getter for the state attribute given a valid state</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.leaf.Leaf">
<em class="property">class </em><tt class="descname">Leaf</tt><a class="headerlink" href="#openalea.stocatree.leaf.Leaf" title="Permalink to this definition">Â¶</a></dt>
<dd><p>a base class interface for leaves</p>
<p>A leaf is defined by an <strong>age</strong>, a <strong>mass</strong> and a <strong>surface</strong> (area). Moreover, 
a <strong>state</strong> is chosen in [&#8216;scar&#8217;, &#8216;growing&#8217;].</p>
<p>In addition, we must set the following attributes that are used to compute the
mass <a class="reference internal" href="#openalea.stocatree.leaf.Leaf.compute_mass" title="openalea.stocatree.leaf.Leaf.compute_mass"><tt class="xref py py-meth docutils literal"><span class="pre">compute_mass()</span></tt></a> and area <a class="reference internal" href="#openalea.stocatree.leaf.Leaf.compute_area" title="openalea.stocatree.leaf.Leaf.compute_area"><tt class="xref py py-meth docutils literal"><span class="pre">compute_area()</span></tt></a>:</p>
<blockquote>
<ul class="simple">
<li>mass_per_area</li>
<li>maturation number of days after which the leaf does not grow anymore</li>
<li>max_area of the leaf</li>
</ul>
</blockquote>
<p>Those attributes should be used to compute the area and mass of the leaf. By default
these attributes are set to None so as to force the user to specifically provide
their values.</p>
<p>There is also a <a class="reference internal" href="#openalea.stocatree.leaf.Leaf.initialisation" title="openalea.stocatree.leaf.Leaf.initialisation"><tt class="xref py py-meth docutils literal"><span class="pre">initialisation()</span></tt></a> that may be used by derived classes to check
that the attributes have been set correctly.</p>
<p>By default, there is a setter/getter for the state.</p>
<dl class="method">
<dt id="openalea.stocatree.leaf.Leaf.compute_area">
<tt class="descname">compute_area</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.leaf.Leaf.compute_area" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the area of the leaf and returns its value (in m**2)</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.leaf.Leaf.compute_mass">
<tt class="descname">compute_mass</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.leaf.Leaf.compute_mass" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the mass of the leaf and returns its value (in kgrams)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">area times mass_per_area</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">compute_area must be called before.</p>
</div>
<p>[<a href="#id1"><span class="problematic" id="id11">`source code &lt;..\plot_directive\pyplots/leaf_mass.py&gt;`__</span></a>, <a href="#id1"><span class="problematic" id="id12">`hires.png &lt;..\plot_directive\pyplots/leaf_mass.hires.png&gt;`__</span></a>, <a href="#id1"><span class="problematic" id="id13">`pdf &lt;..\plot_directive\pyplots/leaf_mass.pdf&gt;`__</span></a>]</p>
<div class="figure">
<img alt="../_images/leaf_mass.png" src="../_images/leaf_mass.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.leaf.Leaf.initialisation">
<tt class="descname">initialisation</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.leaf.Leaf.initialisation" title="Permalink to this definition">Â¶</a></dt>
<dd><p>check that mass_per_area, maturation and max_area have been set
to numerical values</p>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.leaf.Leaf.state">
<tt class="descname">state</tt><a class="headerlink" href="#openalea.stocatree.leaf.Leaf.state" title="Permalink to this definition">Â¶</a></dt>
<dd><p>setter/getter for the state attribute given a valid state</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.apex">
<span id="apex-apex"></span><h3><a class="toc-backref" href="#id19">2.1.4. <tt class="xref py py-mod docutils literal"><span class="pre">apex</span></tt> &#8211; Apex</a><a class="headerlink" href="#module-openalea.stocatree.apex" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">apex.py summary</p>
<p>Module dedicated to apices</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.apex</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first last">$Id: fruit.py 8635 2010-04-14 08:48:47Z cokelaer $</p>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.apex.apex_data">
<em class="property">class </em><tt class="descname">apex_data</tt><big>(</big><em>hlu=&lt;openalea.stocatree.frame.Frame object at 0x05F70570&gt;</em>, <em>observation='trunk'</em>, <em>terminal_expansion_rate=2.0000000000000002e-05</em>, <em>minimum_size=0.00075000000000000002</em>, <em>maximum_size=0.0060000000000000001</em>, <em>minimum_length=4</em>, <em>maximum_length=70</em><big>)</big><a class="headerlink" href="#openalea.stocatree.apex.apex_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>An apex class to be used in stocatree</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Usage :</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>First, you need to create an instance of the apex</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">apex_data</span><span class="p">()</span>
</pre></div>
</div>
<p>There are several default parameters described in the constructor 
documentation. You can now access to the attributes such as the 
<strong>observation</strong> using the getter <a class="reference internal" href="#openalea.stocatree.apex.apex_data.get_observation" title="openalea.stocatree.apex.apex_data.get_observation"><tt class="xref py py-func docutils literal"><span class="pre">get_observation()</span></tt></a>. There is
also a setter for the observation <a class="reference internal" href="#openalea.stocatree.apex.apex_data.set_observation" title="openalea.stocatree.apex.apex_data.set_observation"><tt class="xref py py-func docutils literal"><span class="pre">set_observation()</span></tt></a></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">get_observation</span><span class="p">()</span>
<span class="go">&#39;trunk&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">Possible observations:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="45%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">observation Code</th>
<th class="head">Type of shoot from a bud</th>
<th class="head">Number of metamers</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>dormant</td>
<td>dormant bud (no shoot grow)</td>
<td>&nbsp;</td>
</tr>
<tr><td>large</td>
<td>long shoot</td>
<td>16-70</td>
</tr>
<tr><td>medium</td>
<td>medium shoot</td>
<td>5-15</td>
</tr>
<tr><td>small</td>
<td>short shoot</td>
<td>4</td>
</tr>
<tr><td>floral</td>
<td>inflorescence</td>
<td>4 followed by a sylleptic shoot</td>
</tr>
<tr><td>trunk</td>
<td>on the main trunk</td>
<td>&nbsp;</td>
</tr>
<tr><td>new_shoot</td>
<td>not yet determined</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>The other important attribute is the <strong>radius</strong>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">.</span><span class="n">radius</span>
<span class="go">0.0</span>
</pre></div>
</div>
<p>There is a <strong>maximum target radius</strong> that is defined by the 
<a class="reference internal" href="#openalea.stocatree.apex.apex_data.max_terminal_radius_target" title="openalea.stocatree.apex.apex_data.max_terminal_radius_target"><tt class="xref py py-func docutils literal"><span class="pre">max_terminal_radius_target()</span></tt></a>.</p>
<p>Each apex is associated to an HLU <tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt> to 
keep track of its orientation in the scene.</p>
<p>Finally, an apex is part of a sequence.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><tt class="xref py py-func docutils literal"><span class="pre">generate_sequence()</span></tt>, <tt class="xref py py-func docutils literal"><span class="pre">terminal_fate()</span></tt></p>
</div>
<p><strong>Constructor</strong></p>
<p>The following attributes are set</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>hlu</strong> &#8211; an instance of <tt class="xref py py-class docutils literal"><span class="pre">Frame</span></tt></li>
<li><strong>observation</strong> &#8211; a string defining the apex&#8217;s state (default is &#8216;trunk&#8217;)</li>
<li><strong>terminal_expansion_rate</strong> &#8211; default is 0.00002 meters per day</li>
<li><strong>minimum_size</strong> &#8211; default is 0.00075 meters</li>
<li><strong>maximum_size</strong> &#8211; default is 0.006 meters</li>
<li><strong>minimum_length</strong> &#8211; minimum length of the sequence (default 4)</li>
<li><strong>maximum_size</strong> &#8211; maximum length of the sequence (default is 70)</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Attributes :</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="28%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">type</th>
<th class="head">Default value</th>
<th class="head">units</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="xref py py-attr docutils literal"><span class="pre">radius</span></tt></td>
<td><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
<td>meters</td>
</tr>
<tr><td><tt class="xref py py-attr docutils literal"><span class="pre">target_radius</span></tt></td>
<td><ol class="first last arabic simple" start="0">
<li></li>
</ol>
</td>
<td>meters</td>
</tr>
<tr><td>parent_observation</td>
<td>&#8216;new_shoot&#8217;</td>
<td>&nbsp;</td>
</tr>
<tr><td>trunk</td>
<td>False</td>
<td>&nbsp;</td>
</tr>
<tr><td>sequence_position</td>
<td>0</td>
<td>&nbsp;</td>
</tr>
<tr><td>sequence</td>
<td>None</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="openalea.stocatree.apex.apex_data.get_observation">
<tt class="descname">get_observation</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.apex.apex_data.get_observation" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns the current apex observation</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.apex.apex_data.get_observation_from_sequence">
<tt class="descname">get_observation_from_sequence</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.apex.apex_data.get_observation_from_sequence" title="Permalink to this definition">Â¶</a></dt>
<dd><p>return observation corresponding to the current position</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.apex.apex_data.max_terminal_radius_target">
<tt class="descname">max_terminal_radius_target</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.apex.apex_data.max_terminal_radius_target" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set the max terminal radius <tt class="xref py py-attr docutils literal"><span class="pre">target_radius</span></tt></p>
<p>The radius range is defined by the minimum and maximum apex radius.</p>
<div class="math">
<p><span class="math">r_{\textrm{range}} = \left(r_{\textrm{max}} - r_{\textrm{min}} \right)</span></p>
</div><p>The position is also defined within a valid range</p>
<div class="math">
<p><span class="math">\textrm{Position}_{\textrm{range}} = \left(\textrm{Posistion}_{\textrm{max}} - \textrm{Position}_{\textrm{min}} \right)</span></p>
</div><p>Therefore the maximum terminal apex range is defined by</p>
<div class="math">
<p><span class="math">r_{\textrm{target}} = r_{\textrm{min}} + r_{\textrm{range}} \times (\frac{ \textrm{Position} - \textrm{Position}_{\textrm{min}})}{\textrm{Position}_{\textrm{range}}}</span></p>
</div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Hypothesis :</th><td class="field-body">a terminal apex expands to a maximum size based on the number
of leaves in a shoot (i.e., position)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.apex.apex_data.set_observation">
<tt class="descname">set_observation</tt><big>(</big><em>observation</em><big>)</big><a class="headerlink" href="#openalea.stocatree.apex.apex_data.set_observation" title="Permalink to this definition">Â¶</a></dt>
<dd><p>set the apex observation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>observation</strong> &#8211; a valid observation</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>observation values are given in the class documentation, or by typing:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">openalea.stocatree.apex</span> <span class="kn">as</span> <span class="nn">apex</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">apex</span><span class="o">.</span><span class="n">apex_data</span><span class="o">.</span><span class="n">states</span>
<span class="go">[&#39;dormant&#39;, &#39;large&#39;, &#39;medium&#39;, &#39;small&#39;, &#39;floral&#39;, &#39;trunk&#39;, &#39;new_shoot&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.apex.apex_data.terminal_expansion">
<tt class="descname">terminal_expansion</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#openalea.stocatree.apex.apex_data.terminal_expansion" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.internode">
<span id="internode-internode"></span><h3><a class="toc-backref" href="#id20">2.1.5. <tt class="xref py py-mod docutils literal"><span class="pre">internode</span></tt> Internode</a><a class="headerlink" href="#module-openalea.stocatree.internode" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">internode.py summary</p>
<p>A module dedicated to define an internode</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: internode.py 9859 2010-11-04 14:51:55Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.internode</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
<dl class="class">
<dt id="openalea.stocatree.internode.Internode">
<em class="property">class </em><tt class="descname">Internode</tt><big>(</big><em>min_length=0.0001</em>, <em>elongation_period=10.0</em>, <em>plastochron=3.0</em><big>)</big><a class="headerlink" href="#openalea.stocatree.internode.Internode" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Internode class to be used within a metamer</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">Internode</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">_plastochron</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span><span class="o">.</span><span class="n">growth_rate</span><span class="p">(</span><span class="s">&#39;small&#39;</span><span class="p">)</span>
<span class="go">0.001</span>
</pre></div>
</div>
<p><strong>internode constructor</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="29%" />
<col width="27%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">type</th>
<th class="head">notation</th>
<th class="head">default value</th>
<th class="head">units</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>plastochron</td>
<td>&nbsp;</td>
<td>3</td>
<td>days</td>
</tr>
<tr><td>elongation_period</td>
<td>&nbsp;</td>
<td>10</td>
<td>days</td>
</tr>
<tr><td>min_length</td>
<td><span class="math">l_{\rm{min}}^{i}</span></td>
<td>0.0001</td>
<td>m/day</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>min_length</strong> &#8211; </li>
<li><strong>plastochron</strong> &#8211; </li>
<li><strong>period</strong> (<em>elongation</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="openalea.stocatree.internode.Internode.growth_rate">
<tt class="descname">growth_rate</tt><big>(</big><em>uzone</em><big>)</big><a class="headerlink" href="#openalea.stocatree.internode.Internode.growth_rate" title="Permalink to this definition">Â¶</a></dt>
<dd><p>compute te growth rate of the internode as a function of its zone</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Hypothesis :</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>The elongation rate of an internode depends on the zone in which it appears</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>uzone</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) &#8211; zone in which is situated the internode</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a velocity in m/day</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.growth_unit">
<span id="growth-unit-growth-unit"></span><h3><a class="toc-backref" href="#id21">2.1.6. <tt class="xref py py-mod docutils literal"><span class="pre">growth_unit</span></tt> Growth unit</a><a class="headerlink" href="#module-openalea.stocatree.growth_unit" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">growth_unit.py summary</p>
<p>A module dedicated to growth units</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body">$Id: fruit.py 8635 2010-04-14 08:48:47Z cokelaer $</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body">from openalea.stocatree.growth_unit import *</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.growth_unit.growth_unit_data">
<em class="property">class </em><tt class="descname">growth_unit_data</tt><big>(</big><em>index=0</em>, <em>year=0</em>, <em>inflorescence=False</em><big>)</big><a class="headerlink" href="#openalea.stocatree.growth_unit.growth_unit_data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>A simple class for the growth unit data structure</p>
<p>This class is used within the Lpy file only at the production level.</p>
<p>For example, if a module called growth_unit is declared as follows:</p>
<div class="highlight-python"><pre>module growth_unit(growth_unit_data): scale=1</pre>
</div>
<p>then, it can be produced as follows:</p>
<div class="highlight-python"><pre>nproduce growth_unit(growth_unit_data(10, 1994, parent_observation=='floral'))</pre>
</div>
<p>Constructor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index</strong> &#8211; the index of this growth unit (default is 0)</li>
<li><strong>year</strong> &#8211; default is 0</li>
<li><strong>inflorescence</strong> &#8211; default is False</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.wood">
<span id="wood-wood"></span><h3><a class="toc-backref" href="#id22">2.1.7. <tt class="xref py py-mod docutils literal"><span class="pre">wood</span></tt> &#8211; Wood</a><a class="headerlink" href="#module-openalea.stocatree.wood" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">Summary</p>
<p>A module dedicated to the wood</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: wood.py 9859 2010-11-04 14:51:55Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.wood</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.wood.Wood">
<em class="property">class </em><tt class="descname">Wood</tt><big>(</big><em>wood_density=1000</em>, <em>reaction_wood_rate=0.5</em>, <em>reaction_wood_inertia_coefficient=0.10000000000000001</em>, <em>youngs_modulus=1.1000000000000001</em>, <em>modulus_of_rupture=50000000.0</em><big>)</big><a class="headerlink" href="#openalea.stocatree.wood.Wood" title="Permalink to this definition">Â¶</a></dt>
<dd><p>a class to manage wood characteristics</p>
<p>This class has only one constructor and no methods. It is used
to store the wood parameters only.</p>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">parameters</th>
<th class="head">default values</th>
<th class="head">units</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>density</td>
<td>1000</td>
<td>kgs per m^3</td>
</tr>
<tr><td>reaction_wood_rate</td>
<td>0.5</td>
<td>&nbsp;</td>
</tr>
<tr><td>reaction_wood_inertia_coefficient</td>
<td>0.1</td>
<td>&nbsp;</td>
</tr>
<tr><td>youngs_modulus</td>
<td>1.0</td>
<td>GPa</td>
</tr>
<tr><td>modulus of rupture</td>
<td>50 10e-6</td>
<td>Pa</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">in stocatree, the config.ini file contains a section [wood] that
allows to instanciate this class.</p>
</div>
<p><strong>Constructor</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>wood_density</strong> &#8211; </li>
<li><strong>reaction_wood</strong> &#8211; </li>
<li><strong>reacton_wood_inertia_coefficient</strong> &#8211; </li>
<li><strong>youngs_modulus</strong> &#8211; </li>
<li><strong>of rupture</strong> (<em>modulus</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition " id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">use Pa for youngs modulus in the config file.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.tree">
<span id="tree-tree"></span><h3><a class="toc-backref" href="#id23">2.1.8. <tt class="xref py py-mod docutils literal"><span class="pre">tree</span></tt> Tree</a><a class="headerlink" href="#module-openalea.stocatree.tree" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">Summary</p>
<p>Module used to define a tree with its standard characteristics
such as branching angles, tropism, ...</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: tree.py 9859 2010-11-04 14:51:55Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.tree</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.tree.Tree">
<em class="property">class </em><tt class="descname">Tree</tt><big>(</big><em>phyllotactic_angle=-144.0</em>, <em>branching_angle=-45.0</em>, <em>floral_angle=-10.0</em>, <em>tropism=0.10000000000000001</em>, <em>preformed_leaves=8</em>, <em>spur_death_probability=0.29999999999999999</em>, <em>inflorescence_death_probability=0.20000000000000001</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tree.Tree" title="Permalink to this definition">Â¶</a></dt>
<dd><p>A class to manage instance of trees.</p>
<p>This class defines only parameters although there are two methods that allows to 
switch between radians and degrees for the angle parameters.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span> <span class="o">=</span> <span class="n">Tree</span><span class="p">(</span><span class="n">branching_angle</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">tropism</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tree</span><span class="o">.</span><span class="n">convert_to_radians</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Constructor</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="55%" />
<col width="23%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">parameters</th>
<th class="head">default values</th>
<th class="head">units</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>phyllotactic_angle</td>
<td>144</td>
<td>degrees</td>
</tr>
<tr><td>branching angle</td>
<td>45</td>
<td>degrees</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>phyllotactic_angle</strong> &#8211; default is -144 degrees</li>
<li><strong>branching_angle</strong> &#8211; default is -45 degrees</li>
<li><strong>floral_angle</strong> &#8211; default -10 degrees</li>
<li><strong>spur_death_probability</strong> &#8211; default is0.3</li>
<li><strong>tropism</strong> &#8211; the z value of the tropism vector (efault is z=0.1)</li>
<li><strong>preformed_leaves</strong> &#8211; 8</li>
<li><strong>inflorescence_death_probability</strong> &#8211; default is 0.2</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>In addition, several attributes are defined:</p>
<blockquote>
<ul class="simple">
<li>an initial HLU frame is also defined to be along the z axis.</li>
<li>trunk_radius in meters</li>
<li>fruits : number of fruits</li>
<li>cross_sectional_area in m^2</li>
<li>growth units</li>
<li>fruit_load</li>
</ul>
</blockquote>
<div class="admonition-todo admonition " id="index-2">
<p class="first admonition-title">Todo</p>
<p class="last">finalise this doc. end_terminal_expansion not used ! 
Neither in original code.</p>
</div>
<dl class="method">
<dt id="openalea.stocatree.tree.Tree.convert_to_degrees">
<tt class="descname">convert_to_degrees</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.tree.Tree.convert_to_degrees" title="Permalink to this definition">Â¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version v8991.</span></p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.tree.Tree.convert_to_radians">
<tt class="descname">convert_to_radians</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.tree.Tree.convert_to_radians" title="Permalink to this definition">Â¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version v8991.</span></p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="scientific-modules">
<h2><a class="toc-backref" href="#id24">2.2. Scientific modules</a><a class="headerlink" href="#scientific-modules" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="module-openalea.stocatree.sequences">
<span id="sequences-sequences-tools"></span><h3><a class="toc-backref" href="#id25">2.2.1. <a class="reference internal" href="#module-openalea.stocatree.sequences" title="openalea.stocatree.sequences: This module provides sequence analysis tools"><tt class="xref py py-mod docutils literal"><span class="pre">sequences</span></tt></a> &#8211; Sequences tools</a><a class="headerlink" href="#module-openalea.stocatree.sequences" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">Summary</p>
<p>This module implements a set of functions that return random sequences
Only <a class="reference internal" href="#openalea.stocatree.sequences.generate_sequence" title="openalea.stocatree.sequences.generate_sequence"><tt class="xref py py-func docutils literal"><span class="pre">generate_sequence()</span></tt></a>, <a class="reference internal" href="#openalea.stocatree.sequences.Markov" title="openalea.stocatree.sequences.Markov"><tt class="xref py py-class docutils literal"><span class="pre">Markov</span></tt></a> and <a class="reference internal" href="#openalea.stocatree.sequences.terminal_fate" title="openalea.stocatree.sequences.terminal_fate"><tt class="xref py py-meth docutils literal"><span class="pre">terminal_fate()</span></tt></a> 
should be used.</p>
<p>It contains quite a few harcoded data arrays that may need to be extracted</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: sequences.py 9894 2010-11-08 17:46:17Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.sequences</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.sequences.DataTerminalFate">
<em class="property">class </em><tt class="descname">DataTerminalFate</tt><a class="headerlink" href="#openalea.stocatree.sequences.DataTerminalFate" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></p>
<p>Class to deal with terminal fate probabilities</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Example :</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">DataTerminalFate</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">_check_probabilities</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">get_data_terminal_fate</span><span class="p">(</span><span class="mi">1994</span><span class="p">,</span> <span class="s">&#39;large&#39;</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>Constructor description</p>
<p>There is one constructor without arguments that simply setup
the <tt class="xref py py-attr docutils literal"><span class="pre">codes</span></tt> attributes that is  a list of possible shoots:</p>
<blockquote>
<ol class="arabic simple">
<li>&#8216;large&#8217;</li>
<li>&#8216;medium&#8217;</li>
<li>&#8216;small&#8217;</li>
<li>&#8216;floral&#8217;</li>
</ol>
</blockquote>
<dl class="method">
<dt id="openalea.stocatree.sequences.DataTerminalFate.get_data_terminal_fate">
<tt class="descname">get_data_terminal_fate</tt><big>(</big><em>year</em>, <em>code</em><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.DataTerminalFate.get_data_terminal_fate" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns the probabilities corresponding to a shoot code and a year</p>
<p>It uses hardcoded list of probabilities such as:</p>
<div class="highlight-python"><pre>(1996, 'medium'): [0.016, 0.238, 0.032, 0.714],</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>year</strong> &#8211; if year is less than 1994 or greater than 2000, then 2000 is chosen</li>
<li><strong>code</strong> &#8211; must be large, medium, small, floral</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">an array containing the probabilities to have a large, medium,
small or floral sequence.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.sequences.terminal_fate">
<tt class="descname">terminal_fate</tt><big>(</big><em>year</em>, <em>observation</em><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.terminal_fate" title="Permalink to this definition">Â¶</a></dt>
<dd><p>This function returns a type of metamer (large, short, ...)</p>
<p>It uses <a class="reference internal" href="#openalea.stocatree.sequences.DataTerminalFate" title="openalea.stocatree.sequences.DataTerminalFate"><tt class="xref py py-class docutils literal"><span class="pre">DataTerminalFate</span></tt></a> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>year</strong> &#8211; is an int</li>
<li><strong>observation</strong> &#8211; is a string. [&#8216;large&#8217;, &#8216;medium&#8217;,&#8217;small&#8217;, &#8216;floral&#8217;]. 
See <a class="reference internal" href="#openalea.stocatree.sequences.DataTerminalFate" title="openalea.stocatree.sequences.DataTerminalFate"><tt class="xref py py-class docutils literal"><span class="pre">DataTerminalFate</span></tt></a> class documentation for details.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Example :</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">index</span><span class="o">=</span><span class="n">terminal_fate</span><span class="p">(</span><span class="mi">1994</span><span class="p">,</span> <span class="s">&#39;large&#39;</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.sequences.Markov">
<em class="property">class </em><tt class="descname">Markov</tt><big>(</big><em>maximum_length=70</em>, <em>minimum_length=4</em><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.Markov" title="Permalink to this definition">Â¶</a></dt>
<dd><p>class to manage all the markov and hidden semi markov sequences</p>
<p>This is used within the Lpy script only. It may be used as a private class</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">markov</span> <span class="o">=</span> <span class="n">Markov</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">markov</span><span class="o">.</span><span class="n">hsm_96_medium</span> <span class="o">=</span> <span class="n">HiddenSemiMarkov</span><span class="p">(</span><span class="s">&#39;../../data/fmodel_fuji_5_15_y3_96.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sequence</span> <span class="o">=</span> <span class="n">generate_sequence</span><span class="p">(</span><span class="s">&#39;small&#39;</span><span class="p">,</span>  <span class="n">markov</span><span class="p">,</span> <span class="mi">1996</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="go">[[0, 0], [0, 0], [0, 0], [0, 0]]</span>
</pre></div>
</div>
<p>see generate_sequence for an explantion of the arguments</p>
<p><strong>constructor</strong></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>max_sequence_length</strong> &#8211; the maximum length of markov sequence (default is 100)</li>
<li><strong>max_length</strong> &#8211; the maximum length (default is 70)</li>
<li><strong>min_length</strong> &#8211; the minimum length (default is 4)</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Attributes :</th><td class="field-body"><ul class="first last simple">
<li>hsm_medium</li>
<li>hsm_long</li>
<li>hsm_short</li>
<li>hsm_short</li>
<li>hsm_96_medium</li>
<li>hsm_97_medium</li>
<li>hsm_98_medium</li>
<li>hsm_95_long</li>
<li>hsm_96_long</li>
<li>hsm_97_long</li>
<li>hsm_98_long</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.sequences.generate_trunk">
<tt class="descname">generate_trunk</tt><big>(</big><em>select=[0, 2]</em><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.generate_trunk" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generate a trunk sequence randomly selected within a list of hard-coded trunk sequences</p>
<p>Used by <a class="reference internal" href="#openalea.stocatree.sequences.generate_sequence" title="openalea.stocatree.sequences.generate_sequence"><tt class="xref py py-meth docutils literal"><span class="pre">generate_sequence()</span></tt></a> only</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>select</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; a list of trunk sequence index to use in simulations 
(default is 0,2).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>This function contains 4 explicit trunk sequences of 60 elements. This
function picks up randomly on of these trunk sequence. The <em>select</em> argument
restrict the selection to the index given in select. This is useful
for instance when one want to always use the same sequence.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Example :</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">deterministic_sequence</span> <span class="o">=</span> <span class="n">generate_trunk</span><span class="p">(</span><span class="n">select</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The sequences have a length of 60. If a sequence is shorter, 
then extra elements must be added using the code number 9.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Here are define the trunk sequences !!</p>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.sequences.generate_floral_sequence">
<tt class="descname">generate_floral_sequence</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.generate_floral_sequence" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generate a floral sequence</p>
<p>Used by <a class="reference internal" href="#openalea.stocatree.sequences.generate_sequence" title="openalea.stocatree.sequences.generate_sequence"><tt class="xref py py-meth docutils literal"><span class="pre">generate_sequence()</span></tt></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">a list of sequences</p>
</td>
</tr>
<tr class="field"><th class="field-name">Example :</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">seq</span> <span class="o">=</span> <span class="n">generate_floral_sequence</span><span class="p">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition " id="index-3">
<p class="first admonition-title">Todo</p>
<p class="last">do not known what this is doing what difference with short_sequence? Seems normal behaviour</p>
</div>
<div class="admonition-todo admonition " id="index-4">
<p class="first admonition-title">Todo</p>
<p class="last">original code uses s(0,12) but was not used</p>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.sequences.generate_short_sequence">
<tt class="descname">generate_short_sequence</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.generate_short_sequence" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generate a short sequence</p>
<p>Used by <a class="reference internal" href="#openalea.stocatree.sequences.generate_sequence" title="openalea.stocatree.sequences.generate_sequence"><tt class="xref py py-meth docutils literal"><span class="pre">generate_sequence()</span></tt></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first">a list of sequences</p>
</td>
</tr>
<tr class="field"><th class="field-name">Example :</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">seq</span> <span class="o">=</span> <span class="n">generate_short_sequence</span><span class="p">()</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition " id="index-5">
<p class="first admonition-title">Todo</p>
<p class="last">check the relevance of this function</p>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.sequences.generate_hsm_sequence">
<tt class="descname">generate_hsm_sequence</tt><big>(</big><em>hsm</em>, <em>sequence_length=100</em><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.generate_hsm_sequence" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generate a Hidden Semi Markov Sequence given an input transition matrix</p>
<p>Used by <a class="reference internal" href="#openalea.stocatree.sequences.generate_sequence" title="openalea.stocatree.sequences.generate_sequence"><tt class="xref py py-meth docutils literal"><span class="pre">generate_sequence()</span></tt></a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>hsm</strong> &#8211; A hidden semi markov instance of HiddenSemiMarkov class from VPlants.Sequence_analysis</li>
<li><strong>sequence_length</strong> &#8211; a length of sequence set to 100 by default</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a sequence</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.sequences.generate_bounded_hsm_sequence">
<tt class="descname">generate_bounded_hsm_sequence</tt><big>(</big><em>hsm</em>, <em>lower_bound</em>, <em>upper_bound</em><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.generate_bounded_hsm_sequence" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns a bouded sequence</p>
<p>One problem with the Markov chains is that they may produce sequences
with an unrealistic number of metamers. when this occurs, the generated
sequence is thrown away and a new one is generated.</p>
<p>Medium shoots are always limited to five to fifteen metamers.</p>
<p>Long shoots ashrinks as the tree ages. They are therefore separated into 
subcategories: 15-25, 26-40 and over 40 metamers (41 to 70).</p>
<p>The probability to select one type of shoot length depends on the year. These
probabilities are stored within the hsm data structure</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>hsm</strong> &#8211; a HiddenSemiMarkov instance</li>
<li><strong>lower_bound</strong> &#8211; int</li>
<li><strong>upper_bound</strong> &#8211; int</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="n">generate_bounded_hsm_sequence</span><span class="p">(</span><span class="n">markov</span><span class="o">.</span><span class="n">hsm_long</span><span class="p">,</span>  <span class="mi">15</span><span class="p">,</span> <span class="mi">26</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.sequences.generate_sequence">
<tt class="descname">generate_sequence</tt><big>(</big><em>obs, markov=None, year=1994, second_year_draws=False, select_trunk=[0, 2]</em><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.generate_sequence" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generation of sequences from Markov chains, based directly on the work
of Michael Renton</p>
<dl class="docutils">
<dt>if observation is</dt>
<dd><ul class="first last simple">
<li>trunk, call <a class="reference internal" href="#openalea.stocatree.sequences.generate_trunk" title="openalea.stocatree.sequences.generate_trunk"><tt class="xref py py-meth docutils literal"><span class="pre">generate_trunk()</span></tt></a></li>
<li>small, call <a class="reference internal" href="#openalea.stocatree.sequences.generate_short_sequence" title="openalea.stocatree.sequences.generate_short_sequence"><tt class="xref py py-meth docutils literal"><span class="pre">generate_short_sequence()</span></tt></a></li>
<li>floral, call <a class="reference internal" href="#openalea.stocatree.sequences.generate_floral_sequence" title="openalea.stocatree.sequences.generate_floral_sequence"><tt class="xref py py-meth docutils literal"><span class="pre">generate_floral_sequence()</span></tt></a></li>
<li>medium, call <a class="reference internal" href="#openalea.stocatree.sequences.generate_bounded_hsm_sequence" title="openalea.stocatree.sequences.generate_bounded_hsm_sequence"><tt class="xref py py-meth docutils literal"><span class="pre">generate_bounded_hsm_sequence()</span></tt></a> with bounded values = [5, 15]</li>
<li>large, call <a class="reference internal" href="#openalea.stocatree.sequences.generate_bounded_hsm_sequence" title="openalea.stocatree.sequences.generate_bounded_hsm_sequence"><tt class="xref py py-meth docutils literal"><span class="pre">generate_bounded_hsm_sequence()</span></tt></a></li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>obs</strong> &#8211; the apex observation in [&#8216;trunk&#8217;, &#8216;small&#8217;, &#8216;floral&#8217;, &#8216;medium&#8217;, &#8216;large&#8217;]</li>
<li><strong>markov</strong> &#8211; an instance of <a class="reference internal" href="#openalea.stocatree.sequences.Markov" title="openalea.stocatree.sequences.Markov"><tt class="xref py py-class docutils literal"><span class="pre">Markov</span></tt></a></li>
<li><strong>year</strong> &#8211; a valid year</li>
<li><strong>second_year_draws</strong> &#8211; if True, uses the alternative <cite>_generate_random_sequences</cite>
function instead of generate_bounded_hsm_sequence. (default is False).
Can only be set to True is year=1995</li>
<li><strong>select_trunk</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; restrict selection of trunk sequences to this list
(default is [0,2]). See <a class="reference internal" href="#openalea.stocatree.sequences.generate_trunk" title="openalea.stocatree.sequences.generate_trunk"><tt class="xref py py-func docutils literal"><span class="pre">generate_trunk()</span></tt></a></li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a random sequence</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.sequences.length_pool">
<tt class="descname">length_pool</tt><big>(</big><em>year</em><big>)</big><a class="headerlink" href="#openalea.stocatree.sequences.length_pool" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns a random number according to <cite>year</cite></p>
<p>year should come from simulation.year</p>
</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.physics">
<span id="physics-physics"></span><h3><a class="toc-backref" href="#id26">2.2.2. <tt class="xref py py-mod docutils literal"><span class="pre">physics</span></tt> &#8211; Physics</a><a class="headerlink" href="#module-openalea.stocatree.physics" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">summary</p>
<p>The physics module implements functions to calculate the moment of inertia
and to reorient the frame with respect to torque effects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">References:</th><td class="field-body"><ol class="first arabic simple">
<li>Colin Smith, Costes Evelyne, On the Simulation of Apple Trees Using
Statistical and Biomechanical Principles, INRIA technical report, 2007</li>
</ol>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: physics.py 9902 2010-11-09 16:25:29Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.physics</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">many functions have been reimplemented in optimisation.pyx</p>
</div>
<dl class="function">
<dt id="openalea.stocatree.physics.second_moment_of_area_circle">
<tt class="descname">second_moment_of_area_circle</tt><big>(</big><em>radius</em><big>)</big><a class="headerlink" href="#openalea.stocatree.physics.second_moment_of_area_circle" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns second moment of area of a circular cross section</p>
<p>The internodes of the branches are assumed to be circular, with a radius
<span class="math">r</span>, and so the moment of inertia for the cross-section bend around an
axis on the same plane is :</p>
<div class="math">
<p><span class="math">I_c = \dfrac{\pi}{4} r^4 = \dfrac{\pi}{64}D^4</span></p>
</div><p>This is used for new shoots with no cambial layers.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This equation is useful in calculating the required strength of masts.
Taking the area moment of inertia calculated from the previous formula,
and entering it into Euler&#8217;s formula gives the maximum force that a mast
can theoretically withstand.</p>
<div class="math">
<p><span class="math">F = \dfrac{\pi ^2 E I}{l ^2}</span></p>
</div><p>where</p>
<blockquote class="last">
<ul class="simple">
<li>E is [Young&#8217;s modulus|Young (elastic) modulus of material]</li>
<li><span class="math">\textrm{I}</span> is the second moment of area of examined object</li>
<li>l is the length of panel</li>
</ul>
</blockquote>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>radius</strong> &#8211; the radius in meters</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns :</th><td class="field-body"><p class="first"><span class="math">I_c</span></p>
</td>
</tr>
<tr class="field"><th class="field-name">References :</th><td class="field-body"><p class="first last">MappleT</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>this function is duplicated in a cython version inside optimisation.pyx</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">openalea.stocatree.optimisation</span> <span class="kn">as</span> <span class="nn">optimisation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">optimisation</span><span class="o">.</span><span class="n">second_moment_of_area_circle</span><span class="p">(</span><span class="mf">1.</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.physics.second_moment_of_area_annular_section">
<tt class="descname">second_moment_of_area_annular_section</tt><big>(</big><em>inner_radius</em>, <em>thickness</em>, <em>section</em><big>)</big><a class="headerlink" href="#openalea.stocatree.physics.second_moment_of_area_annular_section" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns second moment of area (annular section)</p>
<p>The annular cross section of an internode, with an inner <strong>radius</strong>
<span class="math">r_i</span>, a <strong>thickness</strong> <span class="math">\theta</span> and a <strong>section</strong> <span class="math">\gamma</span>
has a second moment of area defined by</p>
<div class="math">
<p><span class="math">I_s = \dfrac{1}{8}  \left( \left( r_i+ \theta \right)^4-r_i^4\right)\times(\gamma+\sin \gamma)</span></p>
</div><p>This function is used within metamer classes to compute in association the reaction wood</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>inner_radius</strong> &#8211; the inner radius in meters</li>
<li><strong>thickness</strong> &#8211; the thickness in meters</li>
<li><strong>section</strong> &#8211; the section angle in radians</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>this function is duplicated in a cython version inside optimisation.pyx</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">openalea.stocatree.optimisation</span> <span class="kn">as</span> <span class="nn">optimisation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">optimisation</span><span class="o">.</span><span class="n">second_moment_of_area_annular_section</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.78</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.physics.rupture">
<tt class="descname">rupture</tt><big>(</big><em>torque</em>, <em>radius</em>, <em>modulus_of_rupture=50000000.0</em><big>)</big><a class="headerlink" href="#openalea.stocatree.physics.rupture" title="Permalink to this definition">Â¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>torque</strong> &#8211; v3d</li>
<li><strong>radius</strong> &#8211; si::length</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.physics.stress">
<tt class="descname">stress</tt><big>(</big><em>torque</em>, <em>radius</em><big>)</big><a class="headerlink" href="#openalea.stocatree.physics.stress" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Stress. Not used for the moment</p>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.physics.reorient_frame">
<tt class="descname">reorient_frame</tt><big>(</big><em>initial_hlu</em>, <em>rotation_velocity</em>, <em>length</em><big>)</big><a class="headerlink" href="#openalea.stocatree.physics.reorient_frame" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Reorient frame</p>
<p>The initial frame is an HLU frame, made of tree orthogonal vectors that indicate the heading,
upwards and left directions of the beam.</p>
<p>Then, the HLU frame is rotated around the rotation velocity vector.</p>
<p>length is used to rotate the frame only when the product of rotation_velocity and length
is large enough.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>initial_hlu</strong> &#8211; a <cite>Frame</cite> defining the initial HLU frame at the beginning of the season</li>
<li><strong>rotation_velocity</strong> &#8211; </li>
<li><strong>length</strong> &#8211; length of metamer</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a new rotated frame</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition-todo admonition " id="index-6">
<p class="first admonition-title">Todo</p>
<p class="last">describe the algorithm</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="docutils">
<dt>this function has been optimised to used the rotate function from</dt>
<dd>optimisation.pyx that computes the rotation of the AxisAngle around a
given vector. It replaces the AxisAngle./quaternion of the origninal code of
MappleT.</dd>
</dl>
<div class="last highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">openalea.stocatree.optimisation</span> <span class="kn">as</span> <span class="nn">optimisation</span>
<span class="n">optimisation</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">hlu</span><span class="p">,</span> <span class="n">Vector3</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.physics.rotate_frame_at_branch">
<tt class="descname">rotate_frame_at_branch</tt><big>(</big><em>initial_hlu</em>, <em>branching_angle</em>, <em>phyllotactic_angle</em><big>)</big><a class="headerlink" href="#openalea.stocatree.physics.rotate_frame_at_branch" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Rotate an initial frame around branching and phyllotactic angle</p>
<p>Given an initial HLU frame, return a new frame after rotation around branching
and phyllotactic angle.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>initial_hlu</strong> &#8211; the initial HLU frame</li>
<li><strong>branching_angle</strong> &#8211; the angle between main trunk and the branch.</li>
<li><strong>phyllotactic_angle</strong> &#8211; the angle related to phyllotaxy</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this function has been optimised to used the rotate function from
optimisation.pyx that computes the rotation of the AxisAngle around a
given vector. It replaces the AxisAngle./quaternion of the origninal code of
MappleT.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this function is not part of optimisation.pyx since it already use the
rotate function and is not called as much as the reorient_frame or rotate
function itself.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.srandom">
<span id="srandom-srandom"></span><h3><a class="toc-backref" href="#id27">2.2.3. <tt class="xref py py-mod docutils literal"><span class="pre">srandom</span></tt> &#8211; SRandom</a><a class="headerlink" href="#module-openalea.stocatree.srandom" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">Summary</p>
<p>A set of simple random functionalities</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: srandom.py 9859 2010-11-04 14:51:55Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.srandom</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="function">
<dt id="openalea.stocatree.srandom.random">
<tt class="descname">random</tt><big>(</big><em>*args</em><big>)</big><a class="headerlink" href="#openalea.stocatree.srandom.random" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns a list of random values uniformly distributed</p>
<p>1 or 2 arguments required.</p>
<p>If only 1 argument is provided, a value between zero and the argument is returned
using a uniform distribution. If 2 arguments are provided, the returned value will be between 
the two arguments.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="p">(</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.srandom.boolean_event">
<tt class="descname">boolean_event</tt><big>(</big><em>probability</em><big>)</big><a class="headerlink" href="#openalea.stocatree.srandom.boolean_event" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return True if the random value is less than the  given probability.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>probability</strong> &#8211; a probability in [0,1]</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span> <span class="o">=</span> <span class="n">boolean_event</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.pipe">
<span id="pipe-pipe"></span><h3><a class="toc-backref" href="#id28">2.2.4. <tt class="xref py py-mod docutils literal"><span class="pre">pipe</span></tt> &#8211; Pipe</a><a class="headerlink" href="#module-openalea.stocatree.pipe" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">pipe.py summary</p>
<p>A module dedicated to pipe models</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">mature</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: pipe.py 9901 2010-11-09 15:51:26Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.pipe</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="function">
<dt id="openalea.stocatree.pipe.get_new_radius">
<tt class="descname">get_new_radius</tt><big>(</big><em>ra</em>, <em>rb</em>, <em>exponent=2.4900000000000002</em>, <em>previous_rt=-1</em><big>)</big><a class="headerlink" href="#openalea.stocatree.pipe.get_new_radius" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Pipe model computation</p>
<p>Returns the radius <span class="math">r_t</span> of a pipe segment at a given time <cite>t</cite> given the radius of 
2 children pipe segments. The new radius is determined as follows:</p>
<div class="math">
<p><span class="math">r_t = \sqrt[P]{r_{a,t}^P+r_{b,t}^P}</span></p>
</div><p>However, to prevent the radius to shrink, you may want to provide the current
radius (which is negative by default), in which case, the new radius is computed as
follows:</p>
<div class="math">
<p><span class="math">r_t = \max{\left(\sqrt[P]{r_{a,t}^P+r_{b,t}^P}, r_{t-1}\right)}</span></p>
</div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ra</strong> &#8211; first radius</li>
<li><strong>rb</strong> &#8211; second radius</li>
<li><strong>previous_rt</strong> &#8211; the current radius. If previous_rt is provided, 
returns max of previous_rt and new radius; this is to prevent the radius to shrink.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><span class="math">r_t</span> the new radius</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.constants">
<span id="constants"></span><h3><a class="toc-backref" href="#id29">2.2.5. <tt class="xref py py-mod docutils literal"><span class="pre">constants</span></tt></a><a class="headerlink" href="#module-openalea.stocatree.constants" title="Permalink to this headline">Â¶</a></h3>
<p>defines trigonometric constants such as</p>
<div class="math">
<p><span class="math">\pi, \frac{\pi}{2}, \frac{\pi}{4}, 2\pi</span></p>
</div></div>
</div>
<div class="section" id="rendering-and-post-analysis">
<h2><a class="toc-backref" href="#id30">2.3. Rendering and post analysis</a><a class="headerlink" href="#rendering-and-post-analysis" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="output-output">
<h3><a class="toc-backref" href="#id31">2.3.1. <a class="reference external" href="http://openalea.gforge.inria.fr/doc/vplants/stat_tool/doc/_build/html/user/autosum.html#output" title="(in vplants.stat_tool v0.9.0)"><tt class="xref py py-mod docutils literal"><span class="pre">output</span></tt></a> Output</a><a class="headerlink" href="#output-output" title="Permalink to this headline">Â¶</a></h3>
<p class="graphviz">
digraph inheritance340b1896df {
rankdir=LR;
size=&quot;8.0, 12.0&quot;;
  &quot;l_string&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.output.l_string&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;output&quot; -&gt; &quot;l_string&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;mtg&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.output.mtg&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;output&quot; -&gt; &quot;mtg&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Data&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.output.Data&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;sequences&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.output.sequences&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;output&quot; -&gt; &quot;sequences&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;output&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.output.output&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;counts&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.output.counts&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;output&quot; -&gt; &quot;counts&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;trunk&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.output.trunk&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;output&quot; -&gt; &quot;trunk&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;leaves&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.output.leaves&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
}
</p>
<span class="target" id="module-openalea.stocatree.output"></span><div class="topic">
<p class="topic-title first">namespace_output summary</p>
<p>Module that provides functionalities to write stocatree outputs</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body"><p class="first">in progress</p>
</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body"><p class="first">in progress</p>
</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</p>
</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Id: output.py 9964 2010-11-23 12:24:26Z cokelaer $</p>
</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body"><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.output</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.output.Data">
<em class="property">class </em><tt class="descname">Data</tt><big>(</big><em>options</em>, <em>revision=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.Data" title="Permalink to this definition">Â¶</a></dt>
<dd><p>a data class to manage output data given by stocatree.</p>
<p>an instance of this class allows to father several output structure such as
<a class="reference internal" href="#openalea.stocatree.output.mtg" title="openalea.stocatree.output.mtg"><tt class="xref py py-class docutils literal"><span class="pre">mtg</span></tt></a> and <a class="reference internal" href="#openalea.stocatree.output.counts" title="openalea.stocatree.output.counts"><tt class="xref py py-class docutils literal"><span class="pre">counts</span></tt></a> and to keep track of stocatree revision and 
options, which is needed to reproduce results.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.plantik.tools.config</span> <span class="kn">import</span> <span class="n">ConfigParams</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree</span> <span class="kn">import</span> <span class="n">get_shared_data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">openalea.stocatree.output</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">options</span> <span class="o">=</span> <span class="n">ConfigParams</span><span class="p">(</span><span class="n">get_shared_data</span><span class="p">(</span><span class="s">&#39;stocatree.ini&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">options</span><span class="p">,</span> <span class="n">revision</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">shorts</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">counts</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s">&#39;1995-10-10&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="o">.</span><span class="n">close_all</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="openalea.stocatree.output.Data.close_all">
<tt class="descname">close_all</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.Data.close_all" title="Permalink to this definition">Â¶</a></dt>
<dd><p>close all the attributes of type <a class="reference internal" href="#openalea.stocatree.output.output" title="openalea.stocatree.output.output"><tt class="xref py py-class docutils literal"><span class="pre">output</span></tt></a>
that is <cite>trunk</cite>, <cite>counts</cite>, <cite>sequences</cite>, <cite>mtg</cite> and <cite>l_string</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.Data.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.Data.init" title="Permalink to this definition">Â¶</a></dt>
<dd><p>init all the attributes of type <a class="reference internal" href="#openalea.stocatree.output.output" title="openalea.stocatree.output.output"><tt class="xref py py-class docutils literal"><span class="pre">output</span></tt></a>
that is <cite>trunk</cite>, <cite>counts</cite>, <cite>sequences</cite>, <cite>mtg</cite> and <cite>l_string</cite> and write header
when required.</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.Data.save">
<tt class="descname">save</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.Data.save" title="Permalink to this definition">Â¶</a></dt>
<dd><p>pickle this data structure</p>
<div class="admonition-todo admonition " id="index-7">
<p class="first admonition-title">Todo</p>
<p class="last">to be finalised</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.output.counts">
<em class="property">class </em><tt class="descname">counts</tt><big>(</big><em>filename='counts'</em>, <em>frequency=4.0</em>, <em>verbose=False</em>, <em>tag=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.counts" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Store the count of shoots (long, small, ...)</p>
<dl class="method">
<dt id="openalea.stocatree.output.counts.advance">
<tt class="descname">advance</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.counts.advance" title="Permalink to this definition">Â¶</a></dt>
<dd><p>increment the elapsed time and return True if time has reached a period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dt</strong> &#8211; the time increment</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.counts.build_filename">
<tt class="descname">build_filename</tt><big>(</big><em>date=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.counts.build_filename" title="Permalink to this definition">Â¶</a></dt>
<dd><p>create the filename given an optional date that is used as a tag</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.counts.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.counts.close" title="Permalink to this definition">Â¶</a></dt>
<dd><p>close the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.counts.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.counts.init" title="Permalink to this definition">Â¶</a></dt>
<dd><p>open the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.counts.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.counts.reset" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.counts.save">
<tt class="descname">save</tt><big>(</big><em>date=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.counts.save" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.output.l_string">
<em class="property">class </em><tt class="descname">l_string</tt><big>(</big><em>filename='l-string'</em>, <em>frequency=5.0</em>, <em>verbose=False</em>, <em>tag=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.l_string" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Defines the output filename to store lstring information</p>
<dl class="method">
<dt id="openalea.stocatree.output.l_string.advance">
<tt class="descname">advance</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.l_string.advance" title="Permalink to this definition">Â¶</a></dt>
<dd><p>increment the elapsed time and return True if time has reached a period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dt</strong> &#8211; the time increment</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.l_string.build_filename">
<tt class="descname">build_filename</tt><big>(</big><em>date=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.l_string.build_filename" title="Permalink to this definition">Â¶</a></dt>
<dd><p>create the filename given an optional date that is used as a tag</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.l_string.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.l_string.close" title="Permalink to this definition">Â¶</a></dt>
<dd><p>close the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.l_string.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.l_string.init" title="Permalink to this definition">Â¶</a></dt>
<dd><p>open the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.l_string.save">
<tt class="descname">save</tt><big>(</big><em>lstring</em>, <em>date</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.l_string.save" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.output.leaves">
<em class="property">class </em><tt class="descname">leaves</tt><a class="headerlink" href="#openalea.stocatree.output.leaves" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Defines the output filename to store leaves information</p>
</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.output.mtg">
<em class="property">class </em><tt class="descname">mtg</tt><big>(</big><em>filename='mtg'</em>, <em>frequency=2.0</em>, <em>verbose=False</em>, <em>tag=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg" title="Permalink to this definition">Â¶</a></dt>
<dd><p>a simple MTG classes to save output in MTG format.</p>
<dl class="method">
<dt id="openalea.stocatree.output.mtg.advance">
<tt class="descname">advance</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg.advance" title="Permalink to this definition">Â¶</a></dt>
<dd><p>increment the elapsed time and return True if time has reached a period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dt</strong> &#8211; the time increment</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.mtg.build_filename">
<tt class="descname">build_filename</tt><big>(</big><em>date=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg.build_filename" title="Permalink to this definition">Â¶</a></dt>
<dd><p>create the filename given an optional date that is used as a tag</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.mtg.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg.close" title="Permalink to this definition">Â¶</a></dt>
<dd><p>close the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.mtg.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg.init" title="Permalink to this definition">Â¶</a></dt>
<dd><p>open the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.mtg.save">
<tt class="descname">save</tt><big>(</big><em>lstring</em>, <em>date</em>, <em>trunk_radius</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg.save" title="Permalink to this definition">Â¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>date</strong> &#8211; date in format compatible with <cite>datetime.date()</cite></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.mtg.write_header">
<tt class="descname">write_header</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg.write_header" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.mtg.write_leading_tabs">
<tt class="descname">write_leading_tabs</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg.write_leading_tabs" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.mtg.write_trailing_tabs">
<tt class="descname">write_trailing_tabs</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.mtg.write_trailing_tabs" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.output.output">
<em class="property">class </em><tt class="descname">output</tt><big>(</big><em>filename=None</em>, <em>verbose=False</em>, <em>frequency=1.0</em>, <em>tag=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.output" title="Permalink to this definition">Â¶</a></dt>
<dd><p>A base class to manage outputs in stocatree.</p>
<p>This base class allows to define a filename given a basename and a tag
and then to open/close this file easily.</p>
<p>It also defines the frequency and period at which data has to be saved.</p>
<p>Given a frequency, the period is computed as 365./frequency.</p>
<p>This class also stored the time elapsed since the beginning.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; a valid basename (e.g. &#8216;output&#8217; in output.txt)</li>
<li><strong>verbose</strong> &#8211; True/False</li>
<li><strong>frequency</strong> &#8211; a frequency to save the data</li>
<li><strong>tag</strong> &#8211; a tag for the filename</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="openalea.stocatree.output.output.advance">
<tt class="descname">advance</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.output.advance" title="Permalink to this definition">Â¶</a></dt>
<dd><p>increment the elapsed time and return True if time has reached a period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dt</strong> &#8211; the time increment</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.output.build_filename">
<tt class="descname">build_filename</tt><big>(</big><em>date=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.output.build_filename" title="Permalink to this definition">Â¶</a></dt>
<dd><p>create the filename given an optional date that is used as a tag</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.output.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.output.close" title="Permalink to this definition">Â¶</a></dt>
<dd><p>close the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.output.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.output.init" title="Permalink to this definition">Â¶</a></dt>
<dd><p>open the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.output.save">
<tt class="descname">save</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.output.save" title="Permalink to this definition">Â¶</a></dt>
<dd><p>output must have a save method to write the date into the file</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.output.sequences">
<em class="property">class </em><tt class="descname">sequences</tt><big>(</big><em>filename='sequences'</em>, <em>frequency=5.0</em>, <em>verbose=False</em>, <em>tag=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.sequences" title="Permalink to this definition">Â¶</a></dt>
<dd><dl class="method">
<dt id="openalea.stocatree.output.sequences.advance">
<tt class="descname">advance</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.sequences.advance" title="Permalink to this definition">Â¶</a></dt>
<dd><p>increment the elapsed time and return True if time has reached a period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dt</strong> &#8211; the time increment</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.sequences.build_filename">
<tt class="descname">build_filename</tt><big>(</big><em>date=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.sequences.build_filename" title="Permalink to this definition">Â¶</a></dt>
<dd><p>create the filename given an optional date that is used as a tag</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.sequences.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.sequences.close" title="Permalink to this definition">Â¶</a></dt>
<dd><p>close the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.sequences.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.sequences.init" title="Permalink to this definition">Â¶</a></dt>
<dd><p>open the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.sequences.save">
<tt class="descname">save</tt><big>(</big><em>sequence</em>, <em>position</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.sequences.save" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.output.trunk">
<em class="property">class </em><tt class="descname">trunk</tt><big>(</big><em>filename='trunk'</em>, <em>frequency=365.0</em>, <em>verbose=False</em>, <em>tag=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.trunk" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Defines the output filename to store trunk information</p>
<dl class="method">
<dt id="openalea.stocatree.output.trunk.advance">
<tt class="descname">advance</tt><big>(</big><em>dt</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.trunk.advance" title="Permalink to this definition">Â¶</a></dt>
<dd><p>increment the elapsed time and return True if time has reached a period</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>dt</strong> &#8211; the time increment</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.trunk.build_filename">
<tt class="descname">build_filename</tt><big>(</big><em>date=None</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.trunk.build_filename" title="Permalink to this definition">Â¶</a></dt>
<dd><p>create the filename given an optional date that is used as a tag</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.trunk.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.trunk.close" title="Permalink to this definition">Â¶</a></dt>
<dd><p>close the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.trunk.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.output.trunk.init" title="Permalink to this definition">Â¶</a></dt>
<dd><p>open the file</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.output.trunk.save">
<tt class="descname">save</tt><big>(</big><em>date</em>, <em>trunk_radius</em>, <em>trunk_cross_sectional_area</em><big>)</big><a class="headerlink" href="#openalea.stocatree.output.trunk.save" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="colors-colors">
<h3><a class="toc-backref" href="#id32">2.3.2. <tt class="xref py py-mod docutils literal"><span class="pre">colors</span></tt> Colors</a><a class="headerlink" href="#colors-colors" title="Permalink to this headline">Â¶</a></h3>
<p class="graphviz">
digraph inheritance49e65b5be0 {
rankdir=LR;
size=&quot;8.0, 12.0&quot;;
  &quot;observation&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.colors.observation&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;colorInterface&quot; -&gt; &quot;observation&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;Colors&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.colors.Colors&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;zone&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.colors.zone&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;colorInterface&quot; -&gt; &quot;zone&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;reaction_wood&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.colors.reaction_wood&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;colorInterface&quot; -&gt; &quot;reaction_wood&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;year&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.colors.year&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
  &quot;colorInterface&quot; -&gt; &quot;year&quot; [arrowsize=0.5,style=&quot;setlinewidth(0.5)&quot;];
  &quot;colorInterface&quot; [shape=ellipse,URL=&quot;#openalea.stocatree.colors.colorInterface&quot;,fontname=Vera Sans, DejaVu Sans, Liberation Sans, Arial, Helvetica, sans,fontsize=14,color=dodgerblue1,style=filled,height=0.75];
}
</p>
<span class="target" id="module-openalea.stocatree.colors"></span><div class="topic">
<p class="topic-title first">Summary</p>
<p>A module dedicated to colors in the Lsystem</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body">$Id: colors.py 9859 2010-11-04 14:51:55Z cokelaer $</td>
</tr>
<tr class="field"><th class="field-name">Usage:</th><td class="field-body">from openalea.stocatree.colors import *</td>
</tr>
</tbody>
</table>
</div>
<div class="admonition-todo admonition " id="index-8">
<p class="first admonition-title">Todo</p>
<p class="last">to be moved to plantik in tools/colors.py</p>
</div>
<dl class="class">
<dt id="openalea.stocatree.colors.Colors">
<em class="property">class </em><tt class="descname">Colors</tt><a class="headerlink" href="#openalea.stocatree.colors.Colors" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Define the indices for the colours to be used in the geometrical representation.</p>
<p>This class gathers all color information related to the different rendering of
the tree. The color indices refer to color material specified in the lpy color 
widget. The possible rendering (specified in the <strong>config.ini</strong> file, see 
<tt class="xref py py-mod docutils literal"><span class="pre">config_doc</span></tt>) are</p>
<blockquote>
<ul class="simple">
<li>observation, <a class="reference internal" href="#openalea.stocatree.colors.observation" title="openalea.stocatree.colors.observation"><tt class="xref py py-class docutils literal"><span class="pre">observation</span></tt></a></li>
<li>year <a class="reference internal" href="#openalea.stocatree.colors.year" title="openalea.stocatree.colors.year"><tt class="xref py py-class docutils literal"><span class="pre">year</span></tt></a></li>
<li>zone <a class="reference internal" href="#openalea.stocatree.colors.zone" title="openalea.stocatree.colors.zone"><tt class="xref py py-class docutils literal"><span class="pre">zone</span></tt></a></li>
<li>reaction_wood <a class="reference internal" href="#openalea.stocatree.colors.reaction_wood" title="openalea.stocatree.colors.reaction_wood"><tt class="xref py py-class docutils literal"><span class="pre">reaction_wood</span></tt></a></li>
</ul>
</blockquote>
<p>This rendering are defined by classes that inherit from <a class="reference internal" href="#openalea.stocatree.colors.colorInterface" title="openalea.stocatree.colors.colorInterface"><tt class="xref py py-class docutils literal"><span class="pre">colorInterface</span></tt></a>.</p>
<p>There are a few more independant indices:</p>
<blockquote>
<ul class="simple">
<li>background  = 0</li>
<li>error       = 1</li>
<li>fruit       = 14</li>
<li>leaf        = 15</li>
<li>autumn_leaf = 16</li>
<li>petal       = 17</li>
<li>stamen      = 18</li>
<li>bark        = 19</li>
<li>ground      = 20</li>
<li>red         = 2</li>
</ul>
</blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">color</span> <span class="o">=</span> <span class="n">Colors</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">color</span><span class="o">.</span><span class="n">observation</span><span class="o">.</span><span class="n">get_color</span><span class="p">(</span><span class="s">&#39;small&#39;</span><span class="p">)</span>
<span class="go">5</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.colors.colorInterface">
<em class="property">class </em><tt class="descname">colorInterface</tt><a class="headerlink" href="#openalea.stocatree.colors.colorInterface" title="Permalink to this definition">Â¶</a></dt>
<dd><p>An interface to associate colors to a render type</p>
<p>For instance <a class="reference internal" href="#openalea.stocatree.colors.observation" title="openalea.stocatree.colors.observation"><tt class="xref py py-class docutils literal"><span class="pre">observation</span></tt></a> associates colors to observation such as
&#8216;short&#8217;, &#8216;medium&#8217;, &#8216;large&#8217;.</p>
<p>Two compusalry methods <a class="reference internal" href="#openalea.stocatree.colors.colorInterface.set_colors" title="openalea.stocatree.colors.colorInterface.set_colors"><tt class="xref py py-meth docutils literal"><span class="pre">set_colors()</span></tt></a> and <a class="reference internal" href="#openalea.stocatree.colors.colorInterface.get_color" title="openalea.stocatree.colors.colorInterface.get_color"><tt class="xref py py-meth docutils literal"><span class="pre">get_color()</span></tt></a> are required.
The setter defines a dictionary containing keywords and their corresponding color
indices. The getter should return the color corresponding to an input keyword.</p>
<dl class="method">
<dt id="openalea.stocatree.colors.colorInterface.get_color">
<tt class="descname">get_color</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.colorInterface.get_color" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns the color index correponding to the key provided. 
It uses the dictionary set with <a class="reference internal" href="#openalea.stocatree.colors.colorInterface.set_colors" title="openalea.stocatree.colors.colorInterface.set_colors"><tt class="xref py py-func docutils literal"><span class="pre">set_colors()</span></tt></a></p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.colors.colorInterface.set_colors">
<tt class="descname">set_colors</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.colorInterface.set_colors" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns a dictionary of keys and correponding index color.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.colors.observation">
<em class="property">class </em><tt class="descname">observation</tt><a class="headerlink" href="#openalea.stocatree.colors.observation" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set of color codes for observation rendering</p>
<p>Change the option <em>rendering</em> in the config.ini to <em>observations</em></p>
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">type</th>
<th class="head">color index</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>dormant</td>
<td>2</td>
</tr>
<tr><td>large</td>
<td>3</td>
</tr>
<tr><td>medium</td>
<td>4</td>
</tr>
<tr><td>small</td>
<td>5</td>
</tr>
<tr><td>floral</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>inherits set_colors and get_colors from <a class="reference internal" href="#openalea.stocatree.colors.colorInterface" title="openalea.stocatree.colors.colorInterface"><tt class="xref py py-class docutils literal"><span class="pre">colorInterface</span></tt></a></p>
<dl class="method">
<dt id="openalea.stocatree.colors.observation.get_color">
<tt class="descname">get_color</tt><big>(</big><em>observation</em><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.observation.get_color" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.colors.observation.set_colors">
<tt class="descname">set_colors</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.observation.set_colors" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.colors.year">
<em class="property">class </em><tt class="descname">year</tt><a class="headerlink" href="#openalea.stocatree.colors.year" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set of color codes for year rendering</p>
<p>a linear color index between 48 and 56 for each year from 
starting year onwards.</p>
<p>Change the option <em>rendering</em> in the config.ini to <em>year</em>
inherits set_colors and get_colors from <a class="reference internal" href="#openalea.stocatree.colors.colorInterface" title="openalea.stocatree.colors.colorInterface"><tt class="xref py py-class docutils literal"><span class="pre">colorInterface</span></tt></a></p>
<dl class="method">
<dt id="openalea.stocatree.colors.year.get_color">
<tt class="descname">get_color</tt><big>(</big><em>year</em>, <em>starting_year</em><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.year.get_color" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.colors.year.set_colors">
<tt class="descname">set_colors</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.year.set_colors" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.colors.reaction_wood">
<em class="property">class </em><tt class="descname">reaction_wood</tt><a class="headerlink" href="#openalea.stocatree.colors.reaction_wood" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set of color codes for reaction wood rendering</p>
<p>rection wood is between 0 and pi. colors between 32
and 47 are used.</p>
<p>Change the option <em>rendering</em> in the config.ini to <em>reaction_wood</em>
inherits set_colors and get_colors from <a class="reference internal" href="#openalea.stocatree.colors.colorInterface" title="openalea.stocatree.colors.colorInterface"><tt class="xref py py-class docutils literal"><span class="pre">colorInterface</span></tt></a></p>
<dl class="method">
<dt id="openalea.stocatree.colors.reaction_wood.get_color">
<tt class="descname">get_color</tt><big>(</big><em>reaction_wood</em><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.reaction_wood.get_color" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.colors.reaction_wood.set_colors">
<tt class="descname">set_colors</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.reaction_wood.set_colors" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="openalea.stocatree.colors.zone">
<em class="property">class </em><tt class="descname">zone</tt><a class="headerlink" href="#openalea.stocatree.colors.zone" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set of color codes for zone rendering</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">type</th>
<th class="head">color index</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>dormant_start</td>
<td>7</td>
</tr>
<tr><td>small</td>
<td>8</td>
</tr>
<tr><td>diffuse</td>
<td>9</td>
</tr>
<tr><td>medium</td>
<td>10</td>
</tr>
<tr><td>floral</td>
<td>11</td>
</tr>
<tr><td>dormant_end</td>
<td>12</td>
</tr>
<tr><td>none</td>
<td>13</td>
</tr>
</tbody>
</table>
<p>Change the option <em>rendering</em> in the config.ini to <em>zone</em>
inherits set_colors and get_colors from <a class="reference internal" href="#openalea.stocatree.colors.colorInterface" title="openalea.stocatree.colors.colorInterface"><tt class="xref py py-class docutils literal"><span class="pre">colorInterface</span></tt></a></p>
<dl class="method">
<dt id="openalea.stocatree.colors.zone.get_color">
<tt class="descname">get_color</tt><big>(</big><em>zone</em><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.zone.get_color" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="openalea.stocatree.colors.zone.set_colors">
<tt class="descname">set_colors</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.colors.zone.set_colors" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.post_analysis">
<span id="post-analysis"></span><h3><a class="toc-backref" href="#id33">2.3.3. <tt class="xref py py-mod docutils literal"><span class="pre">post_analysis</span></tt></a><a class="headerlink" href="#module-openalea.stocatree.post_analysis" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">post_analysis.py summary</p>
<p>Module that implements functions that create graphical output
given the standard stocatree outputs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body">$Id: fruit.py 8635 2010-04-14 08:48:47Z cokelaer $</td>
</tr>
</tbody>
</table>
</div>
<p class="deprecated">
<span class="versionmodified">Deprecated since version 0.9.3.</span></p>
<dl class="function">
<dt id="openalea.stocatree.post_analysis.trunk_radius">
<tt class="descname">trunk_radius</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#openalea.stocatree.post_analysis.trunk_radius" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Read the trunk.dat and create output graphics</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tag</strong> &#8211; if tag is provided the file that will be read is trunk_&lt;tag&gt;.dat</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="optimisation-module">
<h2><a class="toc-backref" href="#id34">2.4. Optimisation module</a><a class="headerlink" href="#optimisation-module" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="optimisation">
<h3><a class="toc-backref" href="#id35">2.4.1. <tt class="xref py py-mod docutils literal"><span class="pre">optimisation</span></tt></a><a class="headerlink" href="#optimisation" title="Permalink to this headline">Â¶</a></h3>
</div>
</div>
<div class="section" id="tools">
<h2><a class="toc-backref" href="#id36">2.5. tools</a><a class="headerlink" href="#tools" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="module-openalea.stocatree.tools.simulation">
<span id="simulation-simulation"></span><h3><a class="toc-backref" href="#id37">2.5.1. <tt class="xref py py-mod docutils literal"><span class="pre">simulation</span></tt> Simulation</a><a class="headerlink" href="#module-openalea.stocatree.tools.simulation" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">simulation.py summary</p>
<p>Classes to create simulation protocols</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body">draft</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body">$Id: fruit.py 8635 2010-04-14 08:48:47Z cokelaer $</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.tools.simulation.RotationConvergence">
<em class="property">class </em><tt class="descname">RotationConvergence</tt><a class="headerlink" href="#openalea.stocatree.tools.simulation.RotationConvergence" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree">
<em class="property">class </em><tt class="descname">SimulationStocatree</tt><big>(</big><em>dt=1</em>, <em>starting_date=2000</em>, <em>ending_date=2010</em>, <em>seed=1163078257</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree" title="Permalink to this definition">Â¶</a></dt>
<dd><dl class="method">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.advance">
<tt class="descname">advance</tt><big>(</big><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.advance" title="Permalink to this definition">Â¶</a></dt>
<dd><p>increment the calendar time by <cite>dt</cite> and check for events activation</p>
<p>All events have a starting date and a duration. When the calendar advance,
we must check whether any events englobe the current time. If so, its <cite>active</cite>
status is set to True. See <tt class="xref py py-class docutils literal"><span class="pre">Event</span></tt>
class for details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">True if we switched to a new year while advancing current time by <cite>dt</cite>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.convert_fractional_year_to_date">
<em class="property">static </em><tt class="descname">convert_fractional_year_to_date</tt><big>(</big><em>year</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.convert_fractional_year_to_date" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns a timedelta object given a fractional year</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">this is a static method</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Simulation</span><span class="o">.</span><span class="n">convert_fractional_year_to_date</span><span class="p">(</span><span class="mf">2000.5</span><span class="p">)</span>
<span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.convert_input_date">
<tt class="descname">convert_input_date</tt><big>(</big><em>date</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.convert_input_date" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.date">
<tt class="descname">date</tt><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.date" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns date from calendar instance</p>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.dt">
<tt class="descname">dt</tt><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.dt" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns time step datetime format</p>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.ending_date">
<tt class="descname">ending_date</tt><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.ending_date" title="Permalink to this definition">Â¶</a></dt>
<dd><p>getter to ending date</p>
</dd></dl>

<dl class="method">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.func_leaf_area_init">
<tt class="descname">func_leaf_area_init</tt><big>(</big><em>filename='functions.fset'</em>, <em>func_name='leaf_area'</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.func_leaf_area_init" title="Permalink to this definition">Â¶</a></dt>
<dd><p>read the functions.fset once for all the metamers</p>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.starting_date">
<tt class="descname">starting_date</tt><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.starting_date" title="Permalink to this definition">Â¶</a></dt>
<dd><p>getter to starting date</p>
</dd></dl>

<dl class="attribute">
<dt id="openalea.stocatree.tools.simulation.SimulationStocatree.time_elapsed">
<tt class="descname">time_elapsed</tt><a class="headerlink" href="#openalea.stocatree.tools.simulation.SimulationStocatree.time_elapsed" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns time elapsed since simulation began in datetime format</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.tools.surface">
<span id="surface-surface"></span><h3><a class="toc-backref" href="#id38">2.5.2. <a class="reference internal" href="#module-surface" title="surface"><tt class="xref py py-mod docutils literal"><span class="pre">surface</span></tt></a> &#8211; surface</a><a class="headerlink" href="#module-openalea.stocatree.tools.surface" title="Permalink to this headline">Â¶</a></h3>
<p>Surface module</p>
<span class="target" id="module-surface"></span><div class="topic">
<p class="topic-title first">Summary</p>
<p>Aliases to surface used within stocatree (petal/leaf/ground)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body">$Id: surface.py 9852 2010-11-03 17:35:16Z cokelaer $</td>
</tr>
</tbody>
</table>
</div>
<dl class="function">
<dt id="openalea.stocatree.tools.surface.leafSurface">
<tt class="descname">leafSurface</tt><big>(</big><em>u_stride=6</em>, <em>v_stride=6</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.surface.leafSurface" title="Permalink to this definition">Â¶</a></dt>
<dd><p>read leaf_surface.s file and return the surface associated</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>u_stride</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; stride in u direction (default is 6)</li>
<li><strong>v_stride</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; stride in v direction (default is 6)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">leaf</span> <span class="o">=</span> <span class="n">leafSurface</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.tools.surface.petalSurface">
<tt class="descname">petalSurface</tt><big>(</big><em>u_stride=6</em>, <em>v_stride=6</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.surface.petalSurface" title="Permalink to this definition">Â¶</a></dt>
<dd><p>read petal_surface.s file and return the surface associated</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>u_stride</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; stride in u direction (default is 6)</li>
<li><strong>v_stride</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; stride in v direction (default is 6)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">petal</span> <span class="o">=</span> <span class="n">petalSurface</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="openalea.stocatree.tools.surface.groundSurface">
<tt class="descname">groundSurface</tt><big>(</big><em>u_stride=6</em>, <em>v_stride=6</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.surface.groundSurface" title="Permalink to this definition">Â¶</a></dt>
<dd><p>read ground_surface.s file and return the surface associated</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>u_stride</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; stride in u direction (default is 6)</li>
<li><strong>v_stride</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) &#8211; stride in v direction (default is 6)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ground</span> <span class="o">=</span> <span class="n">groundSurface</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-openalea.stocatree.tools.read_function">
<span id="read-function-readfunction"></span><h3><a class="toc-backref" href="#id39">2.5.3. <tt class="xref py py-mod docutils literal"><span class="pre">read_function</span></tt> &#8211; ReadFunction</a><a class="headerlink" href="#module-openalea.stocatree.tools.read_function" title="Permalink to this headline">Â¶</a></h3>
<div class="topic">
<p class="topic-title first">read_function.py summary</p>
<p>facilities to read L-studio data set</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body">$Id: read_function.py 9859 2010-11-04 14:51:55Z cokelaer $</td>
</tr>
</tbody>
</table>
</div>
<dl class="class">
<dt id="openalea.stocatree.tools.read_function.ReadFunction">
<em class="property">class </em><tt class="descname">ReadFunction</tt><big>(</big><em>filename</em>, <em>func_name</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.read_function.ReadFunction" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Read a L-studio functions.fset file, extract a func_name
and returns interpolated values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Example :</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<p>Starting from a file like:</p>
<div class="highlight-python"><pre>funcgalleryver 1 1
items: 2
fver 1 1
name: _fruit_mass
samples: 100
flip: off
points: 4
0.000000 0.000000
0.586364 0.000000
0.586364 0.250000
1.000000 0.250000
fver 1 1
name: _leaf_area
samples: 100
flip: off
points: 6
0.000000 0.000000
0.250000 0.100000
0.500000 0.500000
0.500000 0.500000
0.750000 0.900000
1.000000 1.000000</pre>
</div>
<p>we use the following code to extract the <em>leaf_area</em> data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">func</span> <span class="o">=</span> <span class="n">ReadFunction</span><span class="p">(</span><span class="s">&#39;functions.fset&#39;</span><span class="p">,</span> <span class="s">&#39;leaf_area&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">func</span><span class="o">.</span><span class="n">gety</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; the filename with the extension</li>
<li><strong>func_name</strong> &#8211; the function name to extract</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="openalea.stocatree.tools.read_function.ReadFunction.gety">
<tt class="descname">gety</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#openalea.stocatree.tools.read_function.ReadFunction.gety" title="Permalink to this definition">Â¶</a></dt>
<dd><p>returns the y values corresponding to x</p>
<p>Use scipy and its simplest 1D interpolation method..</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> &#8211; the input x value</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns y:</th><td class="field-body"><p class="first last">the interpolated y value derived from the function read in the constructor.</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span><span class="o">.</span><span class="n">gety</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="module-openalea.stocatree.config_doc">
<span id="config-doc-config"></span><h2><a class="toc-backref" href="#id40">2.6. <tt class="xref py py-mod docutils literal"><span class="pre">config_doc</span></tt> config</a><a class="headerlink" href="#module-openalea.stocatree.config_doc" title="Permalink to this headline">Â¶</a></h2>
<div class="topic">
<p class="topic-title first">configuration file summary</p>
<p>Documentation of a standard configuration file to be used within stocatree</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Code:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Documentation:</th><td class="field-body">mature</td>
</tr>
<tr class="field"><th class="field-name">Author:</th><td class="field-body">Thomas Cokelaer &lt;<a class="reference external" href="mailto:Thomas&#46;Cokelaer&#37;&#52;&#48;sophia&#46;inria&#46;fr">Thomas<span>&#46;</span>Cokelaer<span>&#64;</span>sophia<span>&#46;</span>inria<span>&#46;</span>fr</a>&gt;</td>
</tr>
<tr class="field"><th class="field-name">Revision:</th><td class="field-body">$Id: namespace_options.py 8954 2010-05-20 13:07:16Z cokelaer $</td>
</tr>
</tbody>
</table>
</div>
<p>Stocatree requires a configuration file called <strong>config.ini</strong> that must contain specific sections and parameters.
Here below we provide an example of the different sections together with an explanation of their parameters.</p>
<div class="section" id="general-section">
<h3><a class="toc-backref" href="#id41">2.6.1. general section</a><a class="headerlink" href="#general-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [general] section is used to set the simulation parameters such as duration and steps:</p>
<div class="highlight-python"><pre>[general]
verbose             = True
max_iterations      = 24000
starting_year       = 1994
end_year            = 1996.5
; set to True, if simulation must stop when current year has reached end_year
end_on_year         = True
time_step           = 1
seed                = 1163078255
tag                 = test</pre>
</div>
<ul class="simple">
<li><strong>tag</strong> is used to tag output filenames</li>
<li><strong>time_step</strong> the step in days</li>
<li><strong>max_iterations</strong> is the maximum number of iterations. You need to take into account that 
at each time step, they may be several iterations. For instance in stocatree there are 4 iterations 
times N for each time step to loop over the different groups. N being the number of iteration required 
by the rotation convergence (2 by default)</li>
<li><strong>starting_year</strong> should be kept to 1994 since many parameters depends on this year.</li>
<li><strong>end_year</strong> the end of the simulation. May be non integer. If <strong>max_iterations</strong> is reached, the simulation
stops even though the time has not reached <strong>end_year</strong></li>
</ul>
</div>
<div class="section" id="stocatree-section">
<h3><a class="toc-backref" href="#id42">2.6.2. stocatree section</a><a class="headerlink" href="#stocatree-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [stocatree] section sets some booleans that are obvious:</p>
<div class="highlight-python"><pre>[stocatree]
saveimage   = False
movie       = False

; Set to true to override the Markov models with a pool draw for the second year shoots
second_year_draws = False

; Enable rupturing in branches
ruptures = False

; Set the trunk on a stake - for all the trunk metamers to remain vertical
stake = True

; Disable the rotation calculations (mechanics)
mechanics = True

; render mode  may be bark, observations, zones, reaction_wood, year
render_mode = bark</pre>
</div>
<p>The <strong>render mode</strong>  may be bark, observations, zones, reaction_wood, year
render_mode = bark</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">render options</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>bark</td>
<td>use a bark-like colour</td>
</tr>
<tr><td>observations</td>
<td>colour encoding of the observations in the
sequences extracted from the Markov models</td>
</tr>
<tr><td>zones</td>
<td>colour encoding of the zones in the
sequences extracted from the Markov models</td>
</tr>
<tr><td>reaction_wood</td>
<td>colour relative to the amount of reaction
wood in the outermost cambial layer</td>
</tr>
<tr><td>years</td>
<td>colour encoding the year of metamer appearance</td>
</tr>
</tbody>
</table>
<p>see <a class="reference internal" href="#module-openalea.stocatree.output" title="openalea.stocatree.output: classes to manage outputs"><tt class="xref py py-mod docutils literal"><span class="pre">openalea.stocatree.output</span></tt></a> for more information on the colors.</p>
</div>
<div class="section" id="output-section">
<h3><a class="toc-backref" href="#id43">2.6.3. output section</a><a class="headerlink" href="#output-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [output] section is described in <a class="reference internal" href="#module-openalea.stocatree.output" title="openalea.stocatree.output: classes to manage outputs"><tt class="xref py py-mod docutils literal"><span class="pre">openalea.stocatree.output</span></tt></a> and looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">output</span><span class="p">]</span>
<span class="n">sequences</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">l_string</span>  <span class="o">=</span> <span class="bp">False</span>
<span class="n">counts</span>    <span class="o">=</span> <span class="bp">False</span>
<span class="n">trunk</span>     <span class="o">=</span> <span class="bp">False</span>
<span class="n">leaves</span>    <span class="o">=</span> <span class="bp">False</span>
<span class="n">mtg</span>       <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
<p>These options will allow to save relevant data:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">config option</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>sequences</td>
<td>The sequences of observations generated from the Markov models</td>
</tr>
<tr><td>l_string</td>
<td>The L-string</td>
</tr>
<tr><td>counts</td>
<td>The numbers of shoots generated per length category</td>
</tr>
<tr><td>trunk</td>
<td>Properties regarding the metamer adjacent to the root</td>
</tr>
<tr><td>mtg</td>
<td>An MTG representation of the tree</td>
</tr>
<tr><td>leaves</td>
<td>Status of the leaves (e.g, position) (draft)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="tree-section">
<h3><a class="toc-backref" href="#id44">2.6.4. tree section</a><a class="headerlink" href="#tree-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [output] section is described in <a class="reference internal" href="#module-openalea.stocatree.tree" title="openalea.stocatree.tree: classes to manage tree class"><tt class="xref py py-mod docutils literal"><span class="pre">openalea.stocatree.tree</span></tt></a> and looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">tree</span><span class="p">]</span>
<span class="n">phyllotactic_angle</span>              <span class="o">=</span> <span class="o">-</span><span class="mf">144.0</span>
<span class="n">branching_angle</span>                 <span class="o">=</span> <span class="o">-</span><span class="mf">45.</span>
<span class="n">floral_angle</span>                    <span class="o">=</span> <span class="o">-</span><span class="mf">10.</span>
<span class="n">tropism</span>                         <span class="o">=</span>  <span class="mf">0.1</span>
<span class="n">preformed_leaves</span>                <span class="o">=</span>  <span class="mi">8</span>
<span class="n">spur_death_probability</span>          <span class="o">=</span>  <span class="mf">0.3</span>
<span class="n">inflorescence_death_probability</span>  <span class="o">=</span>  <span class="mf">0.2</span>
</pre></div>
</div>
</div>
<div class="section" id="wood-section">
<h3><a class="toc-backref" href="#id45">2.6.5. wood section</a><a class="headerlink" href="#wood-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [wood] section is described in <a class="reference internal" href="#openalea.stocatree.wood.Wood" title="openalea.stocatree.wood.Wood"><tt class="xref py py-class docutils literal"><span class="pre">openalea.stocatree.wood.Wood</span></tt></a> and looks like:</p>
<div class="highlight-python"><pre>[wood]
;The following parameters name are the keys required to create a Wood class, which in turn is used to instanciate a metamer_data class
;;in kgs/m3
wood_density                      = 1000
reaction_wood_rate                = 0.5
reaction_wood_inertia_coefficient = 0.1
; in GPa
youngs_modulus                    = 1.1
; in Pa
modulus_of_rupture                = 50e6</pre>
</div>
</div>
<div class="section" id="internode-section">
<h3><a class="toc-backref" href="#id46">2.6.6. internode section</a><a class="headerlink" href="#internode-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [internode] section is described in <a class="reference internal" href="#openalea.stocatree.internode.Internode" title="openalea.stocatree.internode.Internode"><tt class="xref py py-class docutils literal"><span class="pre">openalea.stocatree.internode.Internode</span></tt></a> and looks like:</p>
<div class="highlight-python"><pre>[internode]
;min_length in meters
min_length          = 0.0001
; elongation and plastochrom in days
elongation_period   = 10.
plastochron         = 3.</pre>
</div>
</div>
<div class="section" id="apex-section">
<h3><a class="toc-backref" href="#id47">2.6.7. apex section</a><a class="headerlink" href="#apex-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [apex] section is described in <a class="reference internal" href="#openalea.stocatree.apex.apex_data" title="openalea.stocatree.apex.apex_data"><tt class="xref py py-class docutils literal"><span class="pre">openalea.stocatree.apex.apex_data</span></tt></a> and looks like:</p>
<div class="highlight-python"><pre>[apex]
; im meters per day
terminal_expansion_rate=0.00002
; in meters
minimum_size=0.00075
; in meters
maximum_size=0.006</pre>
</div>
</div>
<div class="section" id="markov-section">
<h3><a class="toc-backref" href="#id48">2.6.8. markov section</a><a class="headerlink" href="#markov-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [markov] section is described in <a class="reference internal" href="#openalea.stocatree.sequences.Markov" title="openalea.stocatree.sequences.Markov"><tt class="xref py py-class docutils literal"><span class="pre">openalea.stocatree.sequences.Markov</span></tt></a> and looks like:</p>
<div class="highlight-python"><pre>[markov]
; must be less than 100
maximum_length = 70
minimum_length = 4</pre>
</div>
</div>
<div class="section" id="fruit-section">
<h3><a class="toc-backref" href="#id49">2.6.9. fruit section</a><a class="headerlink" href="#fruit-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [fruit] section is described in <a class="reference internal" href="#openalea.stocatree.fruit.AppleFruit" title="openalea.stocatree.fruit.AppleFruit"><tt class="xref py py-class docutils literal"><span class="pre">openalea.stocatree.fruit.AppleFruit</span></tt></a> and looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">fruit</span><span class="p">]</span>
<span class="n">flower_duration</span>             <span class="o">=</span> <span class="mf">10.</span>
<span class="n">max_relative_growth_rate</span>    <span class="o">=</span> <span class="mf">0.167</span>
<span class="n">lost_time</span>                   <span class="o">=</span> <span class="mi">28</span>
<span class="n">max_age</span>                     <span class="o">=</span> <span class="mi">147</span>
<span class="n">probability</span>                 <span class="o">=</span> <span class="mf">0.3</span>
<span class="n">max_absolute_growth_rate</span>    <span class="o">=</span> <span class="mf">0.0018</span>
</pre></div>
</div>
</div>
<div class="section" id="leaf-section">
<h3><a class="toc-backref" href="#id50">2.6.10. leaf section</a><a class="headerlink" href="#leaf-section" title="Permalink to this headline">Â¶</a></h3>
<p>The [leaf] section is described in <a class="reference internal" href="#openalea.stocatree.leaf.AppleLeaf" title="openalea.stocatree.leaf.AppleLeaf"><tt class="xref py py-class docutils literal"><span class="pre">openalea.stocatree.leaf.AppleLeaf</span></tt></a> and looks like:</p>
<div class="highlight-python"><pre>[leaf]
; maturation is in days
; mass_per_area, in kgs/m**2
; max_area, min_final_area in meters**2
; petiole_radius in meters
fall_probability = 0.1
maturation       = 12
mass_per_area    = 0.220
max_area         = 0.0030
min_final_area   = 0.0020
petiole_radius   = 0.0006
preformed_leaves = 8</pre>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="biblio.html" title="1.7. Bibliography"
             >previous</a> |</li>


<li><a href="../../../../../../openalea/doc/_build/html/index.html"> Main home </a>  |&nbsp;</li>
<li><a href="../../../../../../openalea/doc/_build/html/vplants.html"> vplants packages </a> |&nbsp;</li><li><a href="../contents.html"> Documentation </a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright None.
      Last updated on Nov 23, 2010.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

  </body>
</html>